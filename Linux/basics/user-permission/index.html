<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>用户和权限管理 | 代码推演录</title><meta name="author" content="Aquarius"><meta name="copyright" content="Aquarius"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1 Linux权限模型资源分派：  Authentication：认证，验证用户身份  Authorization：授权，不同的用户设置不同权限  Accouting|Audition：审计   当用户登录成功时，系统会自动分配令牌 token，包括：用户标识和组成员等信息 3A认证：又称AAA认证，是一套针对网络设备的网络访问控制策略安全模型 1.1 用户Linux系统是多用户系统，可以同时存在">
<meta property="og:type" content="article">
<meta property="og:title" content="用户和权限管理">
<meta property="og:url" content="https://aquapluto.github.io/Linux/basics/user-permission/">
<meta property="og:site_name" content="代码推演录">
<meta property="og:description" content="1 Linux权限模型资源分派：  Authentication：认证，验证用户身份  Authorization：授权，不同的用户设置不同权限  Accouting|Audition：审计   当用户登录成功时，系统会自动分配令牌 token，包括：用户标识和组成员等信息 3A认证：又称AAA认证，是一套针对网络设备的网络访问控制策略安全模型 1.1 用户Linux系统是多用户系统，可以同时存在">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://aquapluto.github.io/img/paper2.jpg">
<meta property="article:published_time" content="2025-08-19T06:02:56.000Z">
<meta property="article:modified_time" content="2025-09-06T11:20:42.676Z">
<meta property="article:author" content="Aquarius">
<meta property="article:tag" content="linux基础">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://aquapluto.github.io/img/paper2.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "用户和权限管理",
  "url": "https://aquapluto.github.io/Linux/basics/user-permission/",
  "image": "https://aquapluto.github.io/img/paper2.jpg",
  "datePublished": "2025-08-19T06:02:56.000Z",
  "dateModified": "2025-09-06T11:20:42.676Z",
  "author": [
    {
      "@type": "Person",
      "name": "Aquarius",
      "url": "https://AquaPluto.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://aquapluto.github.io/Linux/basics/user-permission/"><link rel="preconnect" href="//unpkg.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://unpkg.com/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '用户和权限管理',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/wave.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      if ($loadingBox.classList.contains('loaded')) return
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()

  if (document.readyState === 'complete') {
    preloader.endLoading()
  } else {
    window.addEventListener('load', preloader.endLoading)
    document.addEventListener('DOMContentLoaded', preloader.endLoading)
    // Add timeout protection: force end after 7 seconds
    setTimeout(preloader.endLoading, 7000)
  }

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(/img/background.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avator.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">138</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">42</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="menus_items"><!-- 一级菜单项（非目录）--><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>计算机基础</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>计算机组成原理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/computer-composition/hardware-composition/"><span>计算机硬件组成</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/computer-composition/CPU/"><span>CPU</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/computer-composition/memory/"><span>内存</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/computer-composition/hard-disk/"><span>硬盘</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>操作系统</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/operating-system/concept/"><span>操作系统的概念</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/operating-system/processes-threads/"><span>进程与线程</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/operating-system/IO-model/"><span>IO模型</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Linux</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>linux基础</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/introduce/"><span>linux介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/file-structure-and-IO-redirects/"><span>文件结构与IO重定向</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/file-command/"><span>文件管理工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/text-command/"><span>文本管理工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/GSA/"><span>文本处理三剑客</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/user-permission/"><span>用户和权限管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/regular-expression/"><span>正则表达式</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Linux/software-manage/"><span>软件包管理</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>进程管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/command/"><span>进程相关命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/signal/"><span>信号发送</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/job-parallel/"><span>作业管理与并行运行</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/OOM/"><span>OOM</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>磁盘管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/disk-partition/"><span>磁盘分区</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/file-system/"><span>文件系统</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/swap/"><span>Swap分区</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/LVM/"><span>逻辑卷管理器LVM</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>网络管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/configuration/"><span>网络配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/test-diagnostic/"><span>网络测试诊断工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/bridge/"><span>网桥配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/troubleshoot/"><span>网络问题排查</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>服务管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/DNS/"><span>域名DNS解析服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/time-synchronization/"><span>时间同步服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/plan-tasks/"><span>计划任务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/log/"><span>日志服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/data-synchronization/"><span>数据的实时同步</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/ssh/"><span>ssh远程连接服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/mail/"><span>邮件服务</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Linux/kernel-manage/"><span>内核和启动管理</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>防火墙</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/introduce/"><span>安全技术和防火墙</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/iptables/"><span>iptables</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/firewalld/"><span>firewalld</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/nft/"><span>nft</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>加密和安全</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/security-mechanisms/"><span>安全机制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/OpenSSL/"><span>OpenSSL</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/sudo/"><span>sudo实现授权</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/PAM/"><span>PAM认证机制</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>shell编程</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/introduce/"><span>shell脚本介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/variable/"><span>变量</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/operations-conditional/"><span>运算和条件测试</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/process-control/"><span>流程控制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/function/"><span>函数</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/array/"><span>数组</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/string/"><span>字符串</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/script-tools/"><span>脚本相关工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/process-lock/"><span>进程锁</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/queue/"><span>队列实现线程并发控制</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Linux/system-optimization/"><span>系统优化</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>数据库</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>MySQL</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/DataBase/MySQL/SQL/"><span>SQL语句</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Redis</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/DataBase/Redis/deploy/"><span>部署安装</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>中间件</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Nginx</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/Nginx/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>HAProxy</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/HAProxy/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Keepalived</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/Keepalived/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Kafka</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/Kafka/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Tomcat</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/Tomcat/111/"><span>111</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>日志</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/ELK/111/"><span>111</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>存储</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Storage/conspect/"><span>存储概论</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Storage/nfs/"><span>NFS</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>容器</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/basics/"><span>容器基础</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Docker</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/conspect/"><span>Docker概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/image/"><span>镜像管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/container/"><span>容器管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/volume/"><span>数据卷</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/network/"><span>网络管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/compose/"><span>Docker-Compose</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>镜像</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Container/mirror/conspect/"><span>镜像概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/mirror/dockerfile/"><span>dockerfile</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/mirror/build/"><span>构建镜像</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/mirror/harbor/"><span>镜像仓库</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>容器进程</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Container/process/management/"><span>容器里的进程管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/process/cpu-cgroup/"><span>cpu cgroup使用</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/process/cpu-usage/"><span>监控容器真实的cpu使用率</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/memory/"><span>容器内存</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/storage/"><span>容器存储</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/network/"><span>容器网络</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/safe/"><span>容器安全</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/containerd/"><span>Containerd</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>K8s</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Kubernetes概论</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/architecture/"><span>Kubernetes架构</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/cri/"><span>容器运行时接口CRI</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/list-watch/"><span>List-Watch机制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/object/"><span>Kubernetes对象</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/namespace/"><span>Namespace</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/kubectl/"><span>kubectl命令</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>部署安装</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/deploy/explanation/"><span>部署说明</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/deploy/docker/"><span>基于docker部署k8s-v1.30</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/deploy/containerd/"><span>基于containerd部署k8s-v1.30</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/deploy/cluster/"><span>集群管理指南</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Pod</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/pod/conspect/"><span>Pod概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/pod/configuration/"><span>Pod的配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/pod/schedule/"><span>Pod的调度</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/pod/eviction/"><span>Pod的驱逐</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>控制器</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/introduce/"><span>控制器介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/deployment/"><span>Deployment</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/statefulset/"><span>StatefulSet</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/daemonset/"><span>DaemonSet</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/job-cronjob/"><span>Job和CronJob</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/HPA/"><span>HPA</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/operator/"><span>Operator</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>服务发现与负载均衡</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/service-loadbalancer/service/"><span>Service</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/service-loadbalancer/ingress/"><span>Ingress</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/service-loadbalancer/coredns/"><span>CoreDNS</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/service-loadbalancer/localdns/"><span>LocalDNS</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>数据存储持久化</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/data-storage/csi/"><span>存储接口CSI</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/data-storage/pv-pvc/"><span>PV和PVC</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/data-storage/storageclass/"><span>StorageClass</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/data-storage/configmap-secret/"><span>ConfigMap和Secret</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>认证与鉴权体系</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/certification-authentication/conspect/"><span>体系概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/certification-authentication/kubeconfig/"><span>kubeconfig</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/certification-authentication/user-account/"><span>User Account</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/certification-authentication/service-account/"><span>Service Account</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>监控</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Monitor/conspect/"><span>监控概论</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Prometheus</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/introduce/"><span>prometheus概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/exporter/"><span>Exporter</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/promql/"><span>PromQL</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/query-persist/"><span>查询结果持久化</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/service-discovery/"><span>服务发现</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/indicators-remarked/"><span>指标重新打标</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/pushmanager/"><span>Pushmanager</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/cluster-ha/"><span>集群与高可用</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Alertmanager</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/alertmanager/introduce/"><span>告警功能概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/alertmanager/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/alertmanager/alarm/"><span>实现告警功能</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/alertmanager/ha/"><span>高可用架构</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Monitor/grafana/"><span>Grafana</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Monitor/streaming/"><span>基于流处理的可观测性架构</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>CICD</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Ansible</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/introduce/"><span>架构概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/command/"><span>相关命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/module/"><span>常用模块</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/playbook/"><span>PlayBook</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>SRE</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/SRE/111/"><span>111</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Python</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>python基础</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>线性表</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>列表</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>元组</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>字符串</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>哈希表</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>封装与解构</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>集合</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>字典</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>解析式与生成器表达式</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>函数</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>IO操作</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>面向对象编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>并发编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>网络编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>数据库编程</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Django</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/ELK/111/"><span>111</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/paper2.jpg);"><nav id="nav"><!-- 左侧博客信息区域--><span id="blog-info"><a class="nav-site-title" href="/"></a><a class="nav-page-title" href="/"><span class="site-name">用户和权限管理</span></a></span><!-- 新增的导航菜单容器（居中布局关键）--><div id="nav-menus-container"><!-- 菜单主体部分--><div id="menus"><!-- 菜单项--><div class="menus_items"><!-- 一级菜单项（非目录）--><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>计算机基础</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>计算机组成原理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/computer-composition/hardware-composition/"><span>计算机硬件组成</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/computer-composition/CPU/"><span>CPU</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/computer-composition/memory/"><span>内存</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/computer-composition/hard-disk/"><span>硬盘</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>操作系统</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/operating-system/concept/"><span>操作系统的概念</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/operating-system/processes-threads/"><span>进程与线程</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/ComputerBasic/operating-system/IO-model/"><span>IO模型</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Linux</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>linux基础</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/introduce/"><span>linux介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/file-structure-and-IO-redirects/"><span>文件结构与IO重定向</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/file-command/"><span>文件管理工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/text-command/"><span>文本管理工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/GSA/"><span>文本处理三剑客</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/user-permission/"><span>用户和权限管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/basics/regular-expression/"><span>正则表达式</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Linux/software-manage/"><span>软件包管理</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>进程管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/command/"><span>进程相关命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/signal/"><span>信号发送</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/job-parallel/"><span>作业管理与并行运行</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/OOM/"><span>OOM</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>磁盘管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/disk-partition/"><span>磁盘分区</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/file-system/"><span>文件系统</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/swap/"><span>Swap分区</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/LVM/"><span>逻辑卷管理器LVM</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>网络管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/configuration/"><span>网络配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/test-diagnostic/"><span>网络测试诊断工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/bridge/"><span>网桥配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/troubleshoot/"><span>网络问题排查</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>服务管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/DNS/"><span>域名DNS解析服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/time-synchronization/"><span>时间同步服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/plan-tasks/"><span>计划任务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/log/"><span>日志服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/data-synchronization/"><span>数据的实时同步</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/ssh/"><span>ssh远程连接服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/mail/"><span>邮件服务</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Linux/kernel-manage/"><span>内核和启动管理</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>防火墙</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/introduce/"><span>安全技术和防火墙</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/iptables/"><span>iptables</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/firewalld/"><span>firewalld</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/nft/"><span>nft</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>加密和安全</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/security-mechanisms/"><span>安全机制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/OpenSSL/"><span>OpenSSL</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/sudo/"><span>sudo实现授权</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/PAM/"><span>PAM认证机制</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>shell编程</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/introduce/"><span>shell脚本介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/variable/"><span>变量</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/operations-conditional/"><span>运算和条件测试</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/process-control/"><span>流程控制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/function/"><span>函数</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/array/"><span>数组</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/string/"><span>字符串</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/script-tools/"><span>脚本相关工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/process-lock/"><span>进程锁</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/queue/"><span>队列实现线程并发控制</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Linux/system-optimization/"><span>系统优化</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>数据库</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>MySQL</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/DataBase/MySQL/SQL/"><span>SQL语句</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Redis</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/DataBase/Redis/deploy/"><span>部署安装</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>中间件</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Nginx</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/Nginx/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>HAProxy</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/HAProxy/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Keepalived</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/Keepalived/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Kafka</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/Kafka/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Tomcat</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Middleware/Tomcat/111/"><span>111</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>日志</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/ELK/111/"><span>111</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>存储</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Storage/conspect/"><span>存储概论</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Storage/nfs/"><span>NFS</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>容器</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/basics/"><span>容器基础</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Docker</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/conspect/"><span>Docker概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/image/"><span>镜像管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/container/"><span>容器管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/volume/"><span>数据卷</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/network/"><span>网络管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/docker/compose/"><span>Docker-Compose</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>镜像</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Container/mirror/conspect/"><span>镜像概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/mirror/dockerfile/"><span>dockerfile</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/mirror/build/"><span>构建镜像</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/mirror/harbor/"><span>镜像仓库</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>容器进程</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Container/process/management/"><span>容器里的进程管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/process/cpu-cgroup/"><span>cpu cgroup使用</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Container/process/cpu-usage/"><span>监控容器真实的cpu使用率</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/memory/"><span>容器内存</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/storage/"><span>容器存储</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/network/"><span>容器网络</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/safe/"><span>容器安全</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Container/containerd/"><span>Containerd</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>K8s</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Kubernetes概论</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/architecture/"><span>Kubernetes架构</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/cri/"><span>容器运行时接口CRI</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/list-watch/"><span>List-Watch机制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/object/"><span>Kubernetes对象</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/namespace/"><span>Namespace</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/conspect/kubectl/"><span>kubectl命令</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>部署安装</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/deploy/explanation/"><span>部署说明</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/deploy/docker/"><span>基于docker部署k8s-v1.30</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/deploy/containerd/"><span>基于containerd部署k8s-v1.30</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/deploy/cluster/"><span>集群管理指南</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Pod</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/pod/conspect/"><span>Pod概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/pod/configuration/"><span>Pod的配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/pod/schedule/"><span>Pod的调度</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/pod/eviction/"><span>Pod的驱逐</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>控制器</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/introduce/"><span>控制器介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/deployment/"><span>Deployment</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/statefulset/"><span>StatefulSet</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/daemonset/"><span>DaemonSet</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/job-cronjob/"><span>Job和CronJob</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/HPA/"><span>HPA</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/controller/operator/"><span>Operator</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>服务发现与负载均衡</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/service-loadbalancer/service/"><span>Service</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/service-loadbalancer/ingress/"><span>Ingress</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/service-loadbalancer/coredns/"><span>CoreDNS</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/service-loadbalancer/localdns/"><span>LocalDNS</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>数据存储持久化</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/data-storage/csi/"><span>存储接口CSI</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/data-storage/pv-pvc/"><span>PV和PVC</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/data-storage/storageclass/"><span>StorageClass</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/data-storage/configmap-secret/"><span>ConfigMap和Secret</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>认证与鉴权体系</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/certification-authentication/conspect/"><span>体系概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/certification-authentication/kubeconfig/"><span>kubeconfig</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/certification-authentication/user-account/"><span>User Account</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Kubernetes/certification-authentication/service-account/"><span>Service Account</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>监控</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Monitor/conspect/"><span>监控概论</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Prometheus</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/introduce/"><span>prometheus概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/exporter/"><span>Exporter</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/promql/"><span>PromQL</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/query-persist/"><span>查询结果持久化</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/service-discovery/"><span>服务发现</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/indicators-remarked/"><span>指标重新打标</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/pushmanager/"><span>Pushmanager</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/prometheus/cluster-ha/"><span>集群与高可用</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Alertmanager</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/alertmanager/introduce/"><span>告警功能概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/alertmanager/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/alertmanager/alarm/"><span>实现告警功能</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Monitor/alertmanager/ha/"><span>高可用架构</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Monitor/grafana/"><span>Grafana</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Monitor/streaming/"><span>基于流处理的可观测性架构</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>CICD</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Ansible</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/introduce/"><span>架构概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/command/"><span>相关命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/module/"><span>常用模块</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/playbook/"><span>PlayBook</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>SRE</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/SRE/111/"><span>111</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Python</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>python基础</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>线性表</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>列表</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>元组</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>字符串</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>哈希表</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>封装与解构</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>集合</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>字典</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>解析式与生成器表达式</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>函数</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>IO操作</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>面向对象编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>并发编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>网络编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>数据库编程</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Django</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/ELK/111/"><span>111</span></a></li></ul></div></div></div></div><!-- 右侧功能区域（新增容器）--><div id="nav-right-container"><!-- 搜索按钮（移动到右侧）--><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i></span></div><!-- 移动端汉堡菜单按钮--><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">用户和权限管理</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-08-19T06:02:56.000Z" title="发表于 2025-08-19 14:02">2025-08-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-06T11:20:42.676Z" title="更新于 2025-09-06 19:20">2025-09-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">10.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>40分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="1-Linux权限模型"><a href="#1-Linux权限模型" class="headerlink" title="1 Linux权限模型"></a>1 Linux权限模型</h1><p>资源分派：</p>
<ul>
<li><p>Authentication：认证，验证用户身份</p>
</li>
<li><p>Authorization：授权，不同的用户设置不同权限</p>
</li>
<li><p>Accouting|Audition：审计</p>
</li>
</ul>
<p>当用户登录成功时，系统会自动分配令牌 token，包括：用户标识和组成员等信息</p>
<p>3A认证：又称AAA认证，是一套针对网络设备的网络访问控制策略安全模型</p>
<h2 id="1-1-用户"><a href="#1-1-用户" class="headerlink" title="1.1 用户"></a>1.1 用户</h2><p>Linux系统是多用户系统，可以同时存在多个用户，每个用户之间都是互相隔离的</p>
<p>Linux中每个用户是通过 User Id （UID）来唯一标识的</p>
<ul>
<li><p>管理员：root, 0</p>
</li>
<li><p>普通用户：1-60000 自动分配</p>
</li>
</ul>
<p>系统用户：1-499 （CentOS 6以前）, 1-999 （CentOS 7以后）对守护进程获取资源进行权限分配</p>
<p>登录用户：500+ （CentOS6以前）, 1000+（CentOS7以后）给用户进行交互式登录使用</p>
<h2 id="1-2-用户组"><a href="#1-2-用户组" class="headerlink" title="1.2 用户组"></a>1.2 用户组</h2><p>Linux中可以将一个或多个用户加入用户组中，组就是包含0个或多个用户的集合，用户组是通过Group ID（GID） 来唯一标识的</p>
<ul>
<li><p>管理员组：root, 0</p>
</li>
<li><p>普通组：</p>
</li>
</ul>
<p>系统组：1-499（CentOS 6以前）, 1-999（CentOS7以后）, 对守护进程获取资源进行权限分配</p>
<p>普通组：500+（CentOS 6以前）, 1000+（CentOS7以后）, 给用户使用</p>
<h2 id="1-3-用户和组的关系"><a href="#1-3-用户和组的关系" class="headerlink" title="1.3 用户和组的关系"></a>1.3 用户和组的关系</h2><ul>
<li><p>一个用户至少有一个组，也可以有多个组；</p>
</li>
<li><p>一个组至少有0个用户，也可以有多个用户；</p>
</li>
<li><p>用户的主要组(primary group)：又称私有组，一个用户必须属于且只有一个主组，创建用户时，默认会创建与其同名的组作为主组；</p>
</li>
<li><p>用户的附加组(supplementary group)：又称辅助组，一个用户可以属于0个或多个附加组；</p>
</li>
<li><p>使用组，可以对用户进行批量管理，比如对一个组授权，则该组下所有的用户能能继承这个组的权限；</p>
</li>
</ul>
<h2 id="1-4-安全上下文"><a href="#1-4-安全上下文" class="headerlink" title="1.4 安全上下文"></a>1.4 安全上下文</h2><p><strong>Linux安全上下文Context</strong></p>
<p>运行中的程序，即进程 (process)，以进程发起者的身份运行，进程所能够访问资源的权限取决于进程的运行者的身份</p>
<p><strong>程序，进程，用户之间的关系是怎样的</strong></p>
<ul>
<li><p>只有可以被执行的文件，才能叫作程序；</p>
</li>
<li><p>对于同一个程序，也不是所有用户都可以运行的，这要取决于当前用户对该程序有没有可执行权限；</p>
</li>
<li><p>用户张三，运行了某个程序，那么，张三就发起了一个进程，该进程的发起者，就是张三，该进程是以张三的身份在运行；</p>
</li>
<li><p>比如：分别以 root 和 wang 的身份运行 <code>/bin/cat /etc/shadow</code> ，得到的结果是不同的，资源能否能被访问，是由运行者的身份决定，非程序本身</p>
</li>
</ul>
<p><strong>进程的访问资源</strong></p>
<p>一个进程能不能访问某些资源，是由进程发起者决定的（跟进程本身的程序文件无关），比如某进程要读写某个文件，则要看该进程发起者有没有权限读取该文件；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[wang@centos8 ~]<span class="variable">$cat</span> /etc/shadow</span><br><span class="line"><span class="built_in">cat</span>: /etc/shadow: Permission denied</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#<span class="built_in">cat</span> /etc/shadow</span><br><span class="line">root:$6$zsrWEC56PrKifAEz<span class="variable">$hylCuGySe</span>.H6l6O2MRvbtqy/VZgnZbau.y57dE85.YHq03MTJVV4UvQVIDcYA1IJzbgpWE0vTU.BtPHLbNBNn0:18246:0:99999:7:::</span><br><span class="line">bin:*:18027:0:99999:7:::</span><br><span class="line">daemon:*:18027:0:99999:7:::</span><br><span class="line">adm:*:18027:0:99999:7:::</span><br><span class="line">lp:*:18027:0:99999:7:::</span><br></pre></td></tr></table></figure>

<p><strong>进程来用文件的时候，如何匹配权限的呢？</strong></p>
<ul>
<li><p>进程启动（必须赋予某种身份）</p>
<ul>
<li>默认为当前登录用户</li>
<li>在配置文件里修改指定进程启动的身份</li>
</ul>
</li>
<li><p>拿着进程的用户身份，去匹配目标文件的权限</p>
<ul>
<li>进程的用户身份会依次配文件的ugo的rwx</li>
</ul>
</li>
</ul>
<h1 id="2-用户管理"><a href="#2-用户管理" class="headerlink" title="2 用户管理"></a>2 用户管理</h1><h2 id="2-1-用户创建"><a href="#2-1-用户创建" class="headerlink" title="2.1 用户创建"></a>2.1 用户创建</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">useradd [options] LOGIN</span><br><span class="line"></span><br><span class="line">-u UID        <span class="comment">#指明UID</span></span><br><span class="line">-g GID        <span class="comment">#指明用户所属主组，可为组名，也可以GID</span></span><br><span class="line">-s SHELL      <span class="comment">#指明用户的默认shell程序，可用列表在/etc/shells文件中</span></span><br><span class="line">-d HOME_DIR   <span class="comment">#以指定的路径(不存在)为家目录</span></span><br><span class="line">-m            <span class="comment">#创建家目录，用于系统用户</span></span><br><span class="line">-M            <span class="comment">#不创建家目录，用于非系统用户</span></span><br><span class="line">-o            <span class="comment">#配合-u 选项，不检查UID的唯一性，即允许使用重复的 UID 创建用户</span></span><br><span class="line">-G GROUP1[,GROUP2,...]   <span class="comment">#为用户指明附加组，组须事先存在</span></span><br><span class="line">-N            <span class="comment">#不创建私用（同名）组做主组，使用users组做主组</span></span><br><span class="line">-r            <span class="comment">#创建系统用户，不会创建邮箱</span></span><br><span class="line">-p            <span class="comment">#指定加密的密码</span></span><br><span class="line">-c <span class="string">&quot;COMMENT“      #用户的注释信息</span></span><br><span class="line"><span class="string">-D                #显示或更改默认的 useradd 配置，默认配置文件是/etc/default/useradd</span></span><br><span class="line"><span class="string">-e                #指定账户的过期日期 YYYY-MM-DD 格式</span></span><br><span class="line"><span class="string">-f                #密码过期之后，账户被彻底禁用之前的天数，0 表示密码过期立即禁用，-1表示不使用此功能</span></span><br><span class="line"><span class="string">-k                #指定家目录模板，创建家目录，会生成一些默认文件，如果指定，就从该目录复制文件，默认是/etc/skel/，要配合-m</span></span><br><span class="line"><span class="string">-K                #不使用 /etc/login.defs 中的默认值，自己指定，比如-K UID_MIN=100</span></span><br><span class="line"><span class="string">-l|--no-log-init  #不将用户添加到最近登录和登录失败记录，前面讲到的3a认证审计，就在此处lastlog|lastb|cat /var/log/secure</span></span><br></pre></td></tr></table></figure>

<p>当创建一个用户时，如果没有指定用户的主组，将会创建一个同名的组作为用户的主组</p>
<p>useradd创建用户时，对于未指定的选项（-u、-g等等），会以<code>/etc/login.defs、/etc/default/useradd</code>两个配置文件中的配置作为参照物</p>
<p>配置文件<code>/etc/login.defs</code>详解</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@egon ~]# grep -Ev <span class="string">&quot;^#|^$&quot;</span> /etc/login.defs</span><br><span class="line">MAIL_DIR /var/spool/mail</span><br><span class="line">PASS_MAX_DAYS 99999     <span class="comment">#密码最大有效期</span></span><br><span class="line">PASS_MIN_DAYS 0         <span class="comment">#两次修改密码的最小间隔时间</span></span><br><span class="line">PASS_MIN_LEN 5          <span class="comment">#密码最小长度，对于root无效</span></span><br><span class="line">PASS_WARN_AGE 7         <span class="comment">#密码过期前多少天开始提示</span></span><br><span class="line">UID_MIN 1000            <span class="comment">#用户ID的最小值</span></span><br><span class="line">UID_MAX 60000           <span class="comment">#用户ID的最大值</span></span><br><span class="line">SYS_UID_MIN 201         <span class="comment">#系统用户ID的最小值</span></span><br><span class="line">SYS_UID_MAX 999         <span class="comment">#系统用户ID的最大值</span></span><br><span class="line">GID_MIN 1000            <span class="comment">#组ID的最小值</span></span><br><span class="line">GID_MAX 60000           <span class="comment">#组ID的最大值</span></span><br><span class="line">SYS_GID_MIN 201         <span class="comment">#系统用户组ID的最小值</span></span><br><span class="line">SYS_GID_MAX 999         <span class="comment">#系统用户组ID的最大值</span></span><br><span class="line">CREATE_HOME <span class="built_in">yes</span>         <span class="comment">#使用useradd的时候是可以创建用户家目录</span></span><br><span class="line">UMASK 077               <span class="comment">#创建家目录时umask的默认控制权限</span></span><br><span class="line">USERGROUPS_ENAB <span class="built_in">yes</span>     <span class="comment">#删除用户的时候是否同时删除用户组</span></span><br><span class="line">ENCRYPT_METHOD SHA512   <span class="comment">#密码加密规则</span></span><br></pre></td></tr></table></figure>

<p>配置文件<code>/etc/default/useradd</code>详解</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@egon ~]# <span class="built_in">cat</span> /etc/default/useradd</span><br><span class="line">GROUP=100               <span class="comment">#依赖于/etc/login.defs的USERGRUUPS_ENAB参数，如果为no，则在此处控制</span></span><br><span class="line">HOME=/home              <span class="comment">#把用户的家目录建在/home中。</span></span><br><span class="line">INACTIVE=-1             <span class="comment">#是否启用账号过期停权,-1表示不启用。</span></span><br><span class="line">EXPIRE=                 <span class="comment">#账号终止日期,不设置表示不启用。</span></span><br><span class="line">SHELL=/bin/bash         <span class="comment">#新用户默认所有的shell类型。</span></span><br><span class="line">SKEL=/etc/skel          <span class="comment">#配置新用户家目录的默认文件存放路径。</span></span><br><span class="line">CREATE_MAIL_SPOOL=<span class="built_in">yes</span>   <span class="comment">#创建mail文件。</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -u 123 -g mysql -s /sbin/nologin -d /data/mysql -M mysql</span><br><span class="line">ID-u，组名-g，默认程序-s，家目录-d【不想创建-M，想创建-m】，用户名</span><br></pre></td></tr></table></figure>

<p>显示或更改默认设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">useradd -D</span><br><span class="line">useradd –D -s SHELL</span><br><span class="line">useradd –D –b BASE_DIR</span><br><span class="line">useradd –D –g GROUP</span><br></pre></td></tr></table></figure>

<p>新建用户的相关文件：当使用useradd创建用户时，创建的用户家目录下会存在<code>.bash_*</code> 环境变量相关的文件，这些环境变量文件默认从<code>/etc/skel</code>目录中拷贝。这个默认拷贝环境变量位置是由<code>/etc/default/useradd</code>配置文件中定义的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/default/useradd  <span class="comment">#cat /etc/default/useradd 可以查看新建账号的属性</span></span><br><span class="line">/etc/skel/*           <span class="comment">#新建的文件的家目录的默认文件是在/etc/skel里的，/etc/skel包含一个新用户在创建后所拥有的默认文件和目录，在创建新用户时，系统会将/etc/skel目录下的文件和目录复制到新用户的家目录中</span></span><br><span class="line">/etc/login.defs</span><br></pre></td></tr></table></figure>

<p>批量创建用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newusers passwd 格式文件 </span><br></pre></td></tr></table></figure>

<p>批量修改用户口令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> username:passwd | chpasswd</span><br></pre></td></tr></table></figure>

<p>范例：误删除了用户git的家目录，请重建并恢复该用户家目录及相应的权限属性</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 data]# useradd git</span><br><span class="line">[root@centos8 data]# ll -d /home/git</span><br><span class="line">drwx------. 3 git git 78 Nov 20 21:51 /home/git</span><br><span class="line">[root@centos8 data]# ll -a /home/git</span><br><span class="line">total 12</span><br><span class="line">drwx------.  3 git  git   78 Nov 20 21:51 .</span><br><span class="line">drwxr-xr-x. 10 root root 113 Nov 20 21:51 ..</span><br><span class="line">-rw-r--r--.  1 git  git   18 Nov  9  2019 .bash_logout</span><br><span class="line">-rw-r--r--.  1 git  git  141 Nov  9  2019 .bash_profile</span><br><span class="line">-rw-r--r--.  1 git  git  312 Nov  9  2019 .bashrc</span><br><span class="line">drwxr-xr-x.  4 git  git   39 Nov 20 13:27 .mozilla</span><br><span class="line">[root@centos8 data]# <span class="built_in">rm</span> -rf /home/git</span><br><span class="line">[root@centos8 data]# ll /home</span><br><span class="line">total 0</span><br><span class="line">drwx------. 3 docker   docker    99 Nov 20 21:14 docker</span><br><span class="line">drwx------. 3 hf       hf       120 Nov 20 16:49 hf</span><br><span class="line">drwx------. 3 mongodb  mongodb  112 Nov 20 21:31 mongodb</span><br><span class="line">drwx------. 3 neteagle neteagle  99 Nov 20 15:59 neteagle</span><br><span class="line">drwx------. 3 redis    redis     99 Nov 20 21:33 redis</span><br><span class="line">drwx------. 3 tomcat   tomcat    78 Nov 20 21:41 tomcat</span><br><span class="line">drwx------. 3 zabbix   zabbix    99 Nov 20 21:40 zabbix</span><br><span class="line"></span><br><span class="line">[root@centos8 data]# ll -a /etc/skel/</span><br><span class="line">total 24</span><br><span class="line">drwxr-xr-x.   3 root root   78 Nov 20 13:28 .</span><br><span class="line">drwxr-xr-x. 135 root root 8192 Nov 20 21:51 ..</span><br><span class="line">-rw-r--r--.   1 root root   18 Nov  9  2019 .bash_logout</span><br><span class="line">-rw-r--r--.   1 root root  141 Nov  9  2019 .bash_profile</span><br><span class="line">-rw-r--r--.   1 root root  312 Nov  9  2019 .bashrc</span><br><span class="line">drwxr-xr-x.   4 root root   39 Nov 20 13:27 .mozilla</span><br><span class="line">[root@centos8 data]# <span class="built_in">cp</span> -a /etc/skel/ /home/git</span><br><span class="line">[root@centos8 data]# ll -a /home/git</span><br><span class="line">total 12</span><br><span class="line">drwxr-xr-x.  3 root root  78 Nov 20 13:28 .</span><br><span class="line">drwxr-xr-x. 10 root root 113 Nov 20 21:59 ..</span><br><span class="line">-rw-r--r--.  1 root root  18 Nov  9  2019 .bash_logout</span><br><span class="line">-rw-r--r--.  1 root root 141 Nov  9  2019 .bash_profile</span><br><span class="line">-rw-r--r--.  1 root root 312 Nov  9  2019 .bashrc</span><br><span class="line">drwxr-xr-x.  4 root root  39 Nov 20 13:27 .mozilla</span><br><span class="line"></span><br><span class="line">[root@centos8 data]# ll -d /home/git</span><br><span class="line">drwxr-xr-x. 3 root root 78 Nov 20 13:28 /home/git</span><br><span class="line">[root@centos8 data]# <span class="built_in">chown</span> git.git /home/git</span><br><span class="line">[root@centos8 data]# ll -d /home/git</span><br><span class="line">drwxr-xr-x. 3 git git 78 Nov 20 13:28 /home/git</span><br><span class="line">[root@centos8 data]# <span class="built_in">chmod</span> 700 /home/git</span><br><span class="line">[root@centos8 data]# ll -d /home/git</span><br><span class="line">drwx------. 3 git git 78 Nov 20 13:28 /home/git</span><br><span class="line"></span><br><span class="line"><span class="comment">#简化</span></span><br><span class="line">[root@centos7 ~]# <span class="built_in">cp</span> -r /etc/skel/. /home/git</span><br><span class="line">[root@centos7 ~]# <span class="built_in">chmod</span> 700 /home/git</span><br><span class="line">[root@centos7 ~]# <span class="built_in">chown</span> -R git.git /home/git</span><br></pre></td></tr></table></figure>

<h2 id="2-2-用户属性修改"><a href="#2-2-用户属性修改" class="headerlink" title="2.2 用户属性修改"></a>2.2 用户属性修改</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">usermod [OPTION] login</span><br><span class="line"></span><br><span class="line">-u UID: 新UID</span><br><span class="line">-g GID: 新主组</span><br><span class="line">-G GROUP1[,GROUP2,...[,GROUPN]]]：新附加组，原来的附加组将会被覆盖；若保留原有，则要同时使用-a选项</span><br><span class="line">-s SHELL：新的默认SHELL</span><br><span class="line">-c <span class="string">&#x27;COMMENT&#x27;</span>：新的注释信息</span><br><span class="line">-d HOME: 新家目录不会自动创建；若要创建新家目录并移动原家数据，同时使用-m选项</span><br><span class="line">-l login_name: 新的名字</span><br><span class="line">-L: lock指定用户,在/etc/shadow 密码栏的增加 !</span><br><span class="line">-U: unlock指定用户,将 /etc/shadow 密码栏的 ! 拿掉</span><br><span class="line">-e YYYY-MM-DD: 指明用户账号过期日期</span><br><span class="line">-f INACTIVE: 设定非活动期限，即宽限期</span><br></pre></td></tr></table></figure>

<h2 id="2-3-删除用户"><a href="#2-3-删除用户" class="headerlink" title="2.3 删除用户"></a>2.3 删除用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">userdel [OPTION]... Login</span><br><span class="line"></span><br><span class="line">-f, --force   强制</span><br><span class="line">-r, --remove 删除用户家目录和邮箱</span><br></pre></td></tr></table></figure>

<p>范例: 强制删除用户和数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#useradd <span class="built_in">test</span></span><br><span class="line">[root@centos8 ~]#<span class="built_in">id</span> <span class="built_in">test</span></span><br><span class="line">uid=1001(<span class="built_in">test</span>) gid=1001(<span class="built_in">test</span>) <span class="built_in">groups</span>=1001(<span class="built_in">test</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#在另一终端用test登录</span></span><br><span class="line">[root@centos8 ~]#su - <span class="built_in">test</span></span><br><span class="line">[<span class="built_in">test</span>@centos8 ~]$</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除正在登录的用户失败</span></span><br><span class="line">[root@centos8 ~]#userdel -r <span class="built_in">test</span></span><br><span class="line">userdel: user <span class="built_in">test</span> is currently used by process 29909</span><br><span class="line">[root@centos8 ~]#<span class="built_in">id</span> <span class="built_in">test</span></span><br><span class="line">uid=1001(<span class="built_in">test</span>) gid=1001(<span class="built_in">test</span>) <span class="built_in">groups</span>=1001(<span class="built_in">test</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#强制删除用户</span></span><br><span class="line">[root@centos8 ~]#userdel -rf <span class="built_in">test</span></span><br><span class="line">userdel: user <span class="built_in">test</span> is currently used by process 29909</span><br><span class="line">[root@centos8 ~]#<span class="built_in">id</span> <span class="built_in">test</span></span><br><span class="line"><span class="built_in">id</span>: ‘<span class="built_in">test</span>’: no such user</span><br></pre></td></tr></table></figure>

<h2 id="2-4-查看用户相关的ID信息"><a href="#2-4-查看用户相关的ID信息" class="headerlink" title="2.4 查看用户相关的ID信息"></a>2.4 查看用户相关的ID信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">id [OPTION]... [USER]</span><br><span class="line"></span><br><span class="line">-u: 显示UID</span><br><span class="line">-g: 显示GID</span><br><span class="line">-G: 显示用户所属的组的ID</span><br><span class="line">-n: 显示名称，需配合ugG使用</span><br></pre></td></tr></table></figure>

<h2 id="2-5-设置密码"><a href="#2-5-设置密码" class="headerlink" title="2.5 设置密码"></a>2.5 设置密码</h2><h3 id="2-5-1-openssl-passwd"><a href="#2-5-1-openssl-passwd" class="headerlink" title="2.5.1 openssl passwd"></a>2.5.1 openssl passwd</h3><p>在Linux系统中我们要向手动生成一个密码可以采用opensll passwd来生成一个密码作为用户账号的密码。Linux系统中的密码存放在&#x2F;etc&#x2F;shadow文件中，并且是以加密的方式存放的，根据加密方式的不同，所产生的加密后的密码的位数也不同</p>
<p>openssl passwd的作用是用来计算密码hash的，目的是为了防止密码以明文的形式出现</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">语法格式： openssl passwd [option] passwd</span><br><span class="line"></span><br><span class="line">openssl passwd常用的选项如下：</span><br><span class="line">-1：表示采用的是MD5加密算法。</span><br><span class="line">-salt：指定salt值，不使用随机产生的salt。在使用加密算法进行加密时，即使密码一样，salt不一样，所计算出来的<span class="built_in">hash</span>值也不一样，除非密码一样，salt值也一样，计算出来的<span class="built_in">hash</span>值才一样。salt为8字节的字符串。 </span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">[tom@localhost ~]$ openssl passwd -1 -salt <span class="string">&#x27;i have a dream&#x27;</span>  <span class="comment">##注意&#x27;i have a dream&#x27; 不是密码而是密码的盐,注意密码的盐里不要有中文</span></span><br><span class="line">Password:   <span class="comment">##这里输入的是密码</span></span><br><span class="line">$1$12345678<span class="variable">$1qWiC4czIc07B4J8bPjfC0</span>   <span class="comment">##这是生成的密文密码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##将生成的密码串，手动添加到/etc/shadow中就可用作用户的登陆密码了。</span></span><br></pre></td></tr></table></figure>

<h3 id="2-5-2-passwd"><a href="#2-5-2-passwd" class="headerlink" title="2.5.2 passwd"></a>2.5.2 passwd</h3><p>用于更新用户的身份验证令牌（口令&#x2F;密码）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">passwd [OPTIONS] UserName</span><br><span class="line"></span><br><span class="line">-d：删除指定用户密码</span><br><span class="line">-l：锁定指定用户</span><br><span class="line">-u：解锁指定用户</span><br><span class="line">-e：强制用户下次登录修改密码</span><br><span class="line">-f：强制操作</span><br><span class="line">-n mindays：指定最短使用期限</span><br><span class="line">-x maxdays：最大使用期限</span><br><span class="line">-w warndays：提前多少天开始警告</span><br><span class="line">-i inactivedays：非活动期限</span><br><span class="line">--stdin：从标准输入接收用户密码,Ubuntu无此选项</span><br></pre></td></tr></table></figure>

<p>范例：非交互式修改用户密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#此方式更通用，适用于各种Linux版本，如:ubuntu</span></span><br><span class="line">[root@centos8 ~]#<span class="built_in">echo</span> -e <span class="string">&#x27;123456\n123456&#x27;</span> | passwd mage   <span class="comment">#因为交互式中需要输入两次密码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#适用于Rocky和Centos，不适用于Ubuntu</span></span><br><span class="line">[root@centos8 ~]#<span class="built_in">echo</span> <span class="string">&#x27;123456&#x27;</span> | passwd --stdin mage</span><br></pre></td></tr></table></figure>

<p>范例：设置用户下次必须更改密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#useradd wang</span><br><span class="line">[root@centos8 ~]#<span class="built_in">echo</span> 123456 | passwd --stdin wang</span><br><span class="line">Changing password <span class="keyword">for</span> user wang.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#getent shadow wang</span><br><span class="line">wang:$6$4f78ko7hJ4fcMvIH<span class="variable">$lpbOkFfziDBLT</span>.8XBCi8c/N7wysDAejN5H9Fgxkt99HRDLTEosO43CK</span><br><span class="line">Yi2XSSVHxAK568Olj3C5bwfNExlves/:18348:0:99999:7:::</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#passwd -e wang</span><br><span class="line">[root@centos8 ~]#su - mage</span><br><span class="line">Last login: Fri Mar 27 09:55:27 CST 2020 on pts/0</span><br><span class="line"></span><br><span class="line">[mage@centos8 ~]<span class="variable">$su</span> - wang</span><br><span class="line">Password:</span><br><span class="line">You are required to change your password immediately (administrator enforced)</span><br><span class="line">Current password:</span><br><span class="line">New password:</span><br><span class="line">Retype new password:</span><br><span class="line">Last login: Fri Mar 27 10:01:20 CST 2020 on pts/0</span><br><span class="line">Last failed login: Fri Mar 27 10:02:37 CST 2020 on pts/0</span><br><span class="line">There was 1 failed login attempt since the last successful login.</span><br><span class="line"></span><br><span class="line">[wang@centos8 ~]<span class="variable">$exit</span></span><br><span class="line"><span class="built_in">logout</span></span><br><span class="line">[mage@centos8 ~]<span class="variable">$exit</span></span><br><span class="line"><span class="built_in">logout</span></span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#getent shadow wang</span><br><span class="line">wang:$6$TX0iLjF52ByHh1zH<span class="variable">$g</span>.WI4LNfauuwgnxpRhd7ePqFKHZ85YU3r6Lh2S0PWRXWGjGlDVtomLW</span><br><span class="line">qpdiWrT.vwqD/Wzok.kzQhUHc8UCs91:18348:0:99999:7:::</span><br></pre></td></tr></table></figure>

<h3 id="2-5-3-chpassed"><a href="#2-5-3-chpassed" class="headerlink" title="2.5.3 chpassed"></a>2.5.3 chpassed</h3><p>用于批量更新密码。注意：命令内没有用户名和密码，回车后以”用户名:密码”的格式输入（密码一般为明文），chpasswd根据选项加密</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">chapasswd [选项]  </span><br><span class="line"></span><br><span class="line">-c  <span class="comment">#使用指定的方法加密。加密方法有DES，MD5，NONE，SHA256，SHA512</span></span><br><span class="line">-e  <span class="comment">#提供的密码已经加密</span></span><br><span class="line">-h  <span class="comment">#帮助</span></span><br><span class="line">-m  <span class="comment">#md5算法</span></span><br></pre></td></tr></table></figure>

<p>范例：非交互式修改密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;user003:123456&quot;</span> | chpasswd</span><br><span class="line"></span><br><span class="line">[root@rocky8 ~]#<span class="built_in">cat</span> &gt; passwd.txt</span><br><span class="line">nginx:123456</span><br><span class="line">k8s:123456</span><br><span class="line">^C</span><br><span class="line"></span><br><span class="line"><span class="comment">#注意要写绝对路径</span></span><br><span class="line">[root@rocky8 ~]#chpasswd &lt; /root/passwd.txt</span><br></pre></td></tr></table></figure>

<p>默认普通用户是没有chpasswd的权限，但是可以通过修改命令文件权限来修改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 4755 /usr/sbin/chpasswd</span><br></pre></td></tr></table></figure>

<h2 id="2-6-修改用户密码策略"><a href="#2-6-修改用户密码策略" class="headerlink" title="2.6 修改用户密码策略"></a>2.6 修改用户密码策略</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">chage [OPTION]... LOGIN</span><br><span class="line"></span><br><span class="line">-d LAST_DAY             <span class="comment">#更改密码的时间</span></span><br><span class="line">-m --mindays MIN_DAYS   <span class="comment">#两次修改密码之间相距的最小天数</span></span><br><span class="line">-M --maxdays MAX_DAYS   <span class="comment">#密码保持有效的最大天数</span></span><br><span class="line">-W --warndays WARN_DAYS   <span class="comment">#密码过期前，提前收到警告信息的天数</span></span><br><span class="line">-I --inactive INACTIVE    <span class="comment">#密码过期INACTIVE天数后，设定密码为失效状态</span></span><br><span class="line">-E --expiredate EXPIRE_DATE <span class="comment">#用户的有效期，0表示马上过期，-1表示永不过期</span></span><br><span class="line">-l              <span class="comment">#显示密码策略</span></span><br></pre></td></tr></table></figure>

<p>密码过期：设置的密码经过一段的时间后，系统会认为该密码不安全，于是将密码设置为过期状态，用户登录的时候，系统会提示用户进行密码修改</p>
<p>密码失效：经过一段时间，如果用户没有进行密码修改，则系统会将该密码设置为失效状态（此时用户不可通过该密码进行登录</p>
<p>范例：下一次登录强制重设密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#chage -d 0 wang</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#test用户将在2019年4月29日失效（不可登陆）</span></span><br><span class="line">[root@centos8 ~]#chage -E 2019-04-29 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置test用户最后一次修改密码的日期为2019年6月30日</span></span><br><span class="line">[root@centos8 ~]#chage -d 2019-06-30 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#从最近修改密码的日期开始的5天内，用户test不能再次修改密码</span></span><br><span class="line">[root@centos8 ~]#chage -m 5 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#test用户自修改密码的日期开始，修改后的密码将在8天后过期</span></span><br><span class="line">[root@centos8 ~]#chage -M 8 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#用户test从密码过期开始算起，3天不修改密码则密码失效</span></span><br><span class="line">[root@centos8 ~]#chage -I 3 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#用户test的密码快要过期的的8天内，系统会持续对用户进行警告</span></span><br><span class="line">[root@centos8 ~]#chage -W 8 <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]#chage -l wu</span><br><span class="line">Last password change        : never           <span class="comment">#最近一次密码修改时间</span></span><br><span class="line">Password expires          : never           <span class="comment">#密码过期时间</span></span><br><span class="line">Password inactive         : never           <span class="comment">#密码失效时间</span></span><br><span class="line">Account expires           : never           <span class="comment">#帐户过期时间</span></span><br><span class="line">Minimum number of days between password change    : 0     <span class="comment">#两次改变密码之间相距的最小天数  </span></span><br><span class="line">Maximum number of days between password change    : 99999   <span class="comment">#两次改变密码之间相距的最大天数</span></span><br><span class="line">Number of days of warning before password expires : 7     <span class="comment">#在密码过期之前警告的天数</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]#<span class="built_in">cat</span> /etc/shadow</span><br><span class="line"><span class="built_in">test</span>:!!:18077:5:8:8:3:18012:</span><br><span class="line">第一个字段为：用户名;</span><br><span class="line">第二个字段为：加密的密码</span><br><span class="line">第三个字段为：密码最后一次修改的时间       （chage -d）</span><br><span class="line">第四个字段为：密码最小修改间隔时间         （chage -m）</span><br><span class="line">第五个字段为：密码的有效期                （chage -M）</span><br><span class="line">第六个字段为：密码需要变更前的警告天数     （ chage -W）</span><br><span class="line">第七个字段为：密码过期后的宽限天数         （chage -I）</span><br><span class="line">第八个字段为：账号失效时间                （chage -E）</span><br><span class="line">第九个字段为：保留</span><br></pre></td></tr></table></figure>

<h2 id="2-7-用户文件"><a href="#2-7-用户文件" class="headerlink" title="2.7 用户文件"></a>2.7 用户文件</h2><h3 id="2-7-1-etc-passwd"><a href="#2-7-1-etc-passwd" class="headerlink" title="2.7.1 &#x2F;etc&#x2F;passwd"></a>2.7.1 &#x2F;etc&#x2F;passwd</h3><p><img src="/Linux/basics/user-permission/1755073667074-cbb776dc-d457-48a8-bc65-e489e9f84719.png" alt="null"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>

<p>第一字段：用户名（也被称为登录名)；</p>
<p>第二字段：口令；在例子中我们看到的是一个x，其实密码已被映射到&#x2F;etc&#x2F;shadow 文件中；</p>
<p>第三字段：UID ；请参看本文的UID的解说；</p>
<p>第四字段：GID；请参看本文的GID的解说；</p>
<p>第五字段：描述信息，可选</p>
<p>第六字段：用户的家目录所在位置；</p>
<p>第七字段：用户所用SHELL的类型</p>
<h3 id="2-7-2-etc-shadow"><a href="#2-7-2-etc-shadow" class="headerlink" title="2.7.2 &#x2F;etc&#x2F;shadow"></a>2.7.2 &#x2F;etc&#x2F;shadow</h3><p><img src="/Linux/basics/user-permission/1755073667144-30815332-6dbb-4f84-864d-671916a7caff.png" alt="null"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">small_egon:$1<span class="variable">$VE</span>.Mq2Xf<span class="variable">$2c9Qi7EQ9JP8GKF8gH7PB1</span>:13072:0:99999:7:::</span><br><span class="line">big_egon:$1$IPDvUhXP<span class="variable">$8R6J</span>/VtPXvLyXxhLWPrnt/:13072:0:99999:7::13108:</span><br></pre></td></tr></table></figure>

<p>第一字段：用户名（也被称为登录名)，在&#x2F;etc&#x2F;shadow中，用户名和&#x2F;etc&#x2F;passwd 是相同的，这样就把passwd 和shadow中用的用户记录联系在一起；这个字段是非空的；</p>
<p>第二字段：密码（已被加密)，如果是有些用户在这段是x，表示这个用户不能登录到系统；这个字段是非空的；</p>
<p>第三字段：上次修改口令的时间；这个时间是从1970年01月01日算起到最近一次修改口令的时间间隔（天数)，您可以通过passwd 来修改用户的密码，然后查看&#x2F;etc&#x2F;shadow中此字段的变化；</p>
<p>第四字段：两次修改口令间隔最少的天数；如果设置为0,则禁用此功能；也就是说用户必须经过多少天才能修改其口令；此项功能用处不是太大；默认值是通过&#x2F;etc&#x2F;login.defs文件定义中获取，PASS_MIN_DAYS 中有定义；</p>
<p>第五字段：两次修改口令间隔最多的天数；这个能增强管理员管理用户口令的时效性，应该说在增强了系统的安全性；如果是系统默认值，是在添加用户时由&#x2F;etc&#x2F;login.defs文件定义中获取，在PASS_MAX_DAYS 中定义；</p>
<p>第六字段：提前多少天警告用户口令将过期；当用户登录系统后，系统登录程序提醒用户口令将要作废；如果是系统默认值，是在添加用户时由&#x2F;etc&#x2F;login.defs文件定义中获取，在PASS_WARN_AGE 中定义；</p>
<p>第七字段：在口令过期之后多少天禁用此用户；此字段表示用户口令作废多少天后，系统会禁用此用户，也就是说系统会不能再让此用户登录，也不会提示用户过期，是完全禁用；</p>
<p>第八字段：用户过期日期；此字段指定了用户作废的天数（从1970年的1月1日开始的天数)，如果这个字段的值为空，帐号永久可用； <a href="http://www.hackdig.com/">www.hackdig.com</a></p>
<p>第九字段：保留字段，目前为空，以备将来Linux发展之用；</p>
<h3 id="2-7-3-其他文件"><a href="#2-7-3-其他文件" class="headerlink" title="2.7.3 其他文件"></a>2.7.3 其他文件</h3><p><code>/etc/skel/</code>：用户老家的模板</p>
<p><code>/home/xxx</code>：用户家目录</p>
<p><code>/var/spool/mail/xxx</code>：用户邮箱文件</p>
<h1 id="3-组管理"><a href="#3-组管理" class="headerlink" title="3 组管理"></a>3 组管理</h1><h2 id="3-1-创建组"><a href="#3-1-创建组" class="headerlink" title="3.1 创建组"></a>3.1 创建组</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">groupadd [OPTION]... group_name</span><br><span class="line"></span><br><span class="line">-g GID 指明GID号；[GID_MIN, GID_MAX]</span><br><span class="line">-r 创建系统组名，CentOS 6之前: ID&lt;500，CentOS 7以后: ID&lt;1000</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd -g 48 -r apache</span><br></pre></td></tr></table></figure>

<h2 id="3-2-修改组"><a href="#3-2-修改组" class="headerlink" title="3.2 修改组"></a>3.2 修改组</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">groupmod [OPTION]... group</span><br><span class="line"></span><br><span class="line">-n group_name: 新名字</span><br><span class="line">-g GID: 新的GID</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod -n new_group_name old_group_name <span class="comment">#重命名一个用户组</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3-删除组"><a href="#3-3-删除组" class="headerlink" title="3.3 删除组"></a>3.3 删除组</h2><p>如果一个组是一个用户的主组，那么该组不能被删除，删掉用户会默认一起删掉他的主组</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">groupdel [options] GROUP</span><br><span class="line"></span><br><span class="line">-f, --force 强制删除，即使是用户的主组也强制删除组,但会导致无主组的用户不可用无法登录</span><br></pre></td></tr></table></figure>

<h2 id="3-4-添加、更改和查看组成员"><a href="#3-4-添加、更改和查看组成员" class="headerlink" title="3.4 添加、更改和查看组成员"></a>3.4 添加、更改和查看组成员</h2><p>对于用户来说，组是分类的</p>
<ul>
<li><p>一类是基本组或称主组，用户只能有一个基本组，创建时可通过-g指定，如未指定则创建一个默认的组(与用户同名)</p>
</li>
<li><p>附加组，基本组不能满足授权要求，创建附加组，将用户加入该组，用户可以属于多个附加组，加入一个组后就拥有了该组的权限</p>
</li>
</ul>
<p><strong>groupmems</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#更改组成员</span></span><br><span class="line">groupmems [options] [action]</span><br><span class="line"></span><br><span class="line">-g, --group groupname   <span class="comment">#更改为指定组 (只有root)</span></span><br><span class="line">-a, --add username      <span class="comment">#指定用户加入组</span></span><br><span class="line">-d, --delete username   <span class="comment">#从组中删除用户</span></span><br><span class="line">-p, --purge             <span class="comment">#从组中清除所有成员</span></span><br><span class="line">-l,  --list             <span class="comment">#显示组成员列表</span></span><br></pre></td></tr></table></figure>

<p><strong>groups</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看用户所属组列表</span></span><br><span class="line"><span class="built_in">groups</span> [OPTION].[USERNAME]...</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#groupmems -l -g admins</span><br><span class="line">[root@centos8 ~]#groupmems -a mage -g admins</span><br><span class="line">[root@centos8 ~]#<span class="built_in">id</span> mage</span><br><span class="line">uid=1001(mage) gid=1001(mage) <span class="built_in">groups</span>=1001(mage),1002(admins)</span><br><span class="line">[root@centos8 ~]#groupmems -l -g admins</span><br><span class="line">mage</span><br><span class="line">[root@centos8 ~]#groupmems -a wang -g admins</span><br><span class="line">[root@centos8 ~]#groupmems -l -g admins</span><br><span class="line">mage wang</span><br><span class="line">[root@centos8 ~]#groupmems -d wang -g admins</span><br><span class="line">[root@centos8 ~]#<span class="built_in">groups</span> wang</span><br><span class="line">wang : wang</span><br><span class="line">[root@centos8 ~]#groupmems -l -g admins</span><br><span class="line">mage</span><br><span class="line">[root@centos8 ~]#groupmems -p -g admins</span><br><span class="line">[root@centos8 ~]#groupmems -l -g admins</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建组 </span></span><br><span class="line">groupadd g1 groupadd g2 groupadd g3</span><br><span class="line"></span><br><span class="line"><span class="comment">#加入组 </span></span><br><span class="line">usermod -G g1,g2,g3 wu </span><br><span class="line">groupmems -a wu -g g1(g2,g3)</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看组成员 </span></span><br><span class="line">groupmems -l -g g1(g2,g3)</span><br></pre></td></tr></table></figure>

<p>**gpasswd：**将用户添加到组或从组中删除，只针对已存在的用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gpasswd [OPTION] GROUP</span><br><span class="line"></span><br><span class="line">-a user 将user添加至指定组中</span><br><span class="line">-d user 从指定附加组中移除用户user</span><br><span class="line">-A user1,user2,... 设置有管理权限的用户列表</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#增加组成员</span></span><br><span class="line">[root@centos8 ~]#groupadd admins</span><br><span class="line">[root@centos8 ~]#<span class="built_in">id</span> wang</span><br><span class="line">uid=1000(wang) gid=1000(wang) <span class="built_in">groups</span>=1000(wang)</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#gpasswd -a wang admins</span><br><span class="line">Adding user wang to group admins</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#<span class="built_in">id</span> wang</span><br><span class="line">uid=1000(wang) gid=1000(wang) <span class="built_in">groups</span>=1000(wang),1002(admins)</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#<span class="built_in">groups</span> wang</span><br><span class="line">wang : wang admins</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#getent group admins</span><br><span class="line">admins:x:1002:wang</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除组成员</span></span><br><span class="line">[root@centos8 ~]#gpasswd -d wang admins</span><br><span class="line">Removing user wang from group admins</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#<span class="built_in">groups</span> wang</span><br><span class="line">wang : wang</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#<span class="built_in">id</span> wang</span><br><span class="line">uid=1000(wang) gid=1000(wang) <span class="built_in">groups</span>=1000(wang)</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#getent group admins</span><br><span class="line">admins:x:1002:</span><br></pre></td></tr></table></figure>

<p>我们可以为组设置密码，然后让一些非组成员的用户通过命令”newgrp”临时切换到组内并输入密码的方式获取用户组的权限和特性</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# groupadd group1</span><br><span class="line">[root@localhost ~]# gpasswd group1</span><br><span class="line">正在修改 group1 组的密码</span><br><span class="line">新密码：</span><br><span class="line">请重新输入新密码：</span><br><span class="line">[root@localhost ~]# <span class="built_in">touch</span> /tmp/a.txt</span><br><span class="line">[root@localhost ~]# ll /tmp/a.txt </span><br><span class="line">-rw-r--r-- 1 root root 0 8月  10 21:01 /tmp/a.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chown</span> .group1 /tmp/a.txt </span><br><span class="line">[root@localhost ~]# !ll</span><br><span class="line">ll /tmp/a.txt </span><br><span class="line">-rw-r--r-- 1 root group1 0 8月  10 21:01 /tmp/a.txt</span><br><span class="line">[root@localhost ~]# <span class="built_in">chmod</span> g+w /tmp/a.txt </span><br><span class="line">[root@localhost ~]# gpasswd group1</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# su - egon</span><br><span class="line">上一次登录：一 8月 10 21:01:46 CST 2020pts/0 上</span><br><span class="line">[egon@localhost ~]$ <span class="built_in">echo</span> 123 &gt;&gt; /tmp/a.txt  <span class="comment"># 此时没有权限</span></span><br><span class="line">-bash: /tmp/a.txt: 权限不够</span><br><span class="line">[egon@localhost ~]$ newgrp group1  <span class="comment"># 临时切换到组group1下，拥有其权限</span></span><br><span class="line">密码：</span><br><span class="line">[egon@localhost ~]$ <span class="built_in">echo</span> 123 &gt;&gt; /tmp/a.txt </span><br><span class="line">[egon@localhost ~]$ <span class="built_in">cat</span> /tmp/a.txt </span><br><span class="line">123</span><br></pre></td></tr></table></figure>

<h2 id="3-5-组文件"><a href="#3-5-组文件" class="headerlink" title="3.5 组文件"></a>3.5 组文件</h2><h3 id="3-5-1-etc-group"><a href="#3-5-1-etc-group" class="headerlink" title="3.5.1 &#x2F;etc&#x2F;group"></a>3.5.1 &#x2F;etc&#x2F;group</h3><p><img src="/Linux/basics/user-permission/1755073667233-44861c1a-cf4c-457a-a05e-b6a50e9f425d.png" alt="null"></p>
<h3 id="3-5-2-etc-gshadow"><a href="#3-5-2-etc-gshadow" class="headerlink" title="3.5.2 &#x2F;etc&#x2F;gshadow"></a>3.5.2 &#x2F;etc&#x2F;gshadow</h3><p><img src="/Linux/basics/user-permission/1755073667286-a0d3dd3d-78b9-49bc-9a6d-93c58ce4a0b0.png" alt="null"></p>
<h1 id="4-权限管理"><a href="#4-权限管理" class="headerlink" title="4 权限管理"></a>4 权限管理</h1><h2 id="4-1-修改文件所有者和所属组"><a href="#4-1-修改文件所有者和所属组" class="headerlink" title="4.1 修改文件所有者和所属组"></a>4.1 修改文件所有者和所属组</h2><h3 id="4-1-1-修改文件所有者"><a href="#4-1-1-修改文件所有者" class="headerlink" title="4.1.1 修改文件所有者"></a>4.1.1 修改文件所有者</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> [OPTION]... [OWNER][:[GROUP]] FILE...</span><br><span class="line"><span class="built_in">chown</span> [OPTION]... --reference=RFILE FILE...</span><br><span class="line"></span><br><span class="line">OWNER        <span class="comment">#只修改所有者</span></span><br><span class="line">OWNER:GROUP  <span class="comment">#同时修改所有者和属组</span></span><br><span class="line">:GROUP       <span class="comment">#只修改属组，冒号也可用 . 替换</span></span><br><span class="line">--reference=RFILE  <span class="comment">#参考指定的的属性，来修改 </span></span><br><span class="line">-R           <span class="comment">#递归，此选项慎用，非常危险！</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 data]#<span class="built_in">chown</span> wang f1.txt</span><br><span class="line">[root@centos8 data]#ll</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 1 wang root 709 Dec 18 10:13 f1.txt</span><br><span class="line">[root@centos8 data]#<span class="built_in">chown</span> :admins f1.txt</span><br><span class="line">[root@centos8 data]#ll f1.txt</span><br><span class="line">-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt</span><br><span class="line">[root@centos8 data]#<span class="built_in">chown</span> root.bin f1.txt</span><br><span class="line">[root@centos8 data]#ll</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 1 root bin 709 Dec 18 10:13 f1.txt</span><br><span class="line"></span><br><span class="line">[root@centos8 data]#ll</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt</span><br><span class="line">-rw-r--r-- 1 root root   23 Dec 18 10:15 f2.txt</span><br><span class="line">[root@centos8 data]#<span class="built_in">chown</span> --reference=f1.txt f2.txt</span><br><span class="line">[root@centos8 data]#ll</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt</span><br><span class="line">-rw-r--r-- 1 wang admins  23 Dec 18 10:15 f2.txt</span><br></pre></td></tr></table></figure>

<p>范例：把data下的所有文件的所有者和所属组都改了（很危险）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#<span class="built_in">chown</span> -R wang.admins /data/</span><br></pre></td></tr></table></figure>

<h3 id="4-1-2-修改文件所属组"><a href="#4-1-2-修改文件所属组" class="headerlink" title="4.1.2 修改文件所属组"></a>4.1.2 修改文件所属组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chgrp</span> [OPTION]... GROUP FILE...</span><br><span class="line"><span class="built_in">chgrp</span> [OPTION]... --reference=RFILE FILE...</span><br><span class="line"></span><br><span class="line">-R <span class="comment">#递归，此选项慎用，非常危险！</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 data]#ll f1.txt</span><br><span class="line">-rw-r--r-- 1 wang root 709 Dec 18 10:13 f1.txt</span><br><span class="line">[root@centos8 data]#<span class="built_in">chgrp</span> admins f1.txt</span><br><span class="line">[root@centos8 data]#ll f1.txt</span><br><span class="line">-rw-r--r-- 1 wang admins 709 Dec 18 10:13 f1.txt</span><br></pre></td></tr></table></figure>

<h2 id="4-2-文件权限"><a href="#4-2-文件权限" class="headerlink" title="4.2 文件权限"></a>4.2 文件权限</h2><h3 id="4-2-1-文件权限说明"><a href="#4-2-1-文件权限说明" class="headerlink" title="4.2.1 文件权限说明"></a>4.2.1 文件权限说明</h3><p>文件的权限主要针对三类对象进行定义</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">owner 属主, u</span><br><span class="line">group 属组, g</span><br><span class="line">other 其他, o</span><br></pre></td></tr></table></figure>

<p>注意</p>
<ul>
<li><p>用户的最终权限，是从左向右进行顺序匹配，即，所有者，所属组，其他人，一旦匹配权限立即生效，不再向右查看其权限</p>
</li>
<li><p>r 和 w 权限对root用户无效，对没有读写权限的文件，root用户也可读可写</p>
</li>
<li><p>只要所有者,所属组或other三者之一有x权限,root就可以执行</p>
</li>
</ul>
<p>每个文件针对每类访问者都定义了三种权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">r Readable 4</span><br><span class="line">w Writable 2</span><br><span class="line">x eXcutable 1</span><br></pre></td></tr></table></figure>

<p><strong>对文件的权限</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">r 可使用文件查看类工具，比如：<span class="built_in">cat</span>，可以获取其内容</span><br><span class="line">w 可修改其内容,文件的是否被删除和文件的权限无关</span><br><span class="line">x 可以把此文件提请内核启动为一个进程，即可以执行（运行）此文件（此文件的内容必须是可执行）</span><br><span class="line"></span><br><span class="line">二进制的命令：/usr/bin/ls   <span class="comment">#只需要拥有对它的x权限就可以执行</span></span><br><span class="line">脚本文件(内容是一对普通文本) <span class="comment">#需要对它拥有r+x权限</span></span><br></pre></td></tr></table></figure>

<p><strong>对目录的权限</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">r 可以使用<span class="built_in">ls</span>查看此目录中文件名列表,但无法看到文件的属性meta信息,包括inode号,不能查看文件的内容</span><br><span class="line">w 可在此目录中创建文件，也可删除此目录中的文件，而和此被删除的文件的权限无关</span><br><span class="line">x 可以<span class="built_in">cd</span>进入此目录，可以使用<span class="built_in">ls</span> -l file或<span class="built_in">stat</span> file 查看此目录中指定文件的元数据，当预先知道文件名称时,也可以查看文件的内容,属于目录的可访问的最小权限</span><br><span class="line">X 分配给目录或有部分x权限的文件的x权限，对无任意x权限的文件则不会分配x权限</span><br><span class="line"></span><br><span class="line"><span class="comment">#目录权限常见组合</span></span><br><span class="line">-  不能访问目录</span><br><span class="line">r-x 只读目录</span><br><span class="line">rwx 可读也可写目录</span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;！！！注意 ！！！&#x3D;&#x3D;</p>
<p>vim修改的原理是将源文件删掉，然后再将内容的内容覆盖写入了新文件，新文件名重命名为原文件名</p>
<ul>
<li>当前用户对沿途所有文件夹都有x权限</li>
<li>并且当前用户对目标文件夹有w权限</li>
<li>但是当前用户对目标文件没有w权限</li>
</ul>
<p>此时当前用可以vim编辑文件内容，并且可以wq!强制保存（输入y确认）退出完成文件修改，其实是将源文件删掉了，可以通过查看前后操作的文件inode号来确定</p>
<p>&#x3D;&#x3D;！！！注意 ！！！&#x3D;&#x3D;</p>
<ul>
<li><p>软链接是没有权限的，改它的权限实际是改的是它所指向的文件，也就是原始文件</p>
</li>
<li><p>去看一个文件是否有权限，不仅要知道这个文件的权限，还要考虑到是否允许进入到它所在的这个目录的权限</p>
</li>
<li><p>如果没有执行权限，root也无法执行</p>
</li>
<li><p>即使对一个文件有所有权限，但是在它所在的目录下没有w权限，也无法修改其内容；相反，如果对一个文件什么权限也没有，但是在其目录下有所有权限，也可以修改其内容</p>
</li>
<li><p>文件的执行是危险的，但是目录的执行权限是常规的</p>
</li>
</ul>
<h3 id="4-2-2-修改文件权限"><a href="#4-2-2-修改文件权限" class="headerlink" title="4.2.2 修改文件权限"></a>4.2.2 修改文件权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> [OPTION]... MODE[,MODE]... FILE...</span><br><span class="line"><span class="built_in">chmod</span> [OPTION]... OCTAL-MODE FILE...</span><br><span class="line"><span class="comment">#参考RFILE文件的权限，将FILE的修改为同RFILE，就是复制该文件的权限信息给指定文件</span></span><br><span class="line"><span class="built_in">chmod</span> [OPTION]... --reference=RFILE FILE...</span><br></pre></td></tr></table></figure>

<p><strong>模式法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> <span class="built_in">who</span> opt per file</span><br><span class="line"><span class="built_in">who</span>:u(属主)，g(属组)，o(其他)，a(所有)</span><br><span class="line">opt(操作):+(增加)，-(删除)，=(赋予)</span><br><span class="line">per(权限):r(读)，w(修改)，x(执行)</span><br><span class="line"><span class="built_in">chmod</span> o+w a.txt</span><br><span class="line">ug=rx   <span class="comment">#属主属组权限改为读和执行</span></span><br><span class="line">o=    <span class="comment">#other用户无任何权限 </span></span><br><span class="line">a=rwx   <span class="comment">#所有用户都有读写执行权限</span></span><br></pre></td></tr></table></figure>

<p><strong>数字法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#有权限1无权限0</span></span><br><span class="line">--- 000 0</span><br><span class="line">--x 001 1</span><br><span class="line">-w- 010 2</span><br><span class="line">-wx 011 3</span><br><span class="line">r-- 100 4</span><br><span class="line">r-x 101 5</span><br><span class="line">rw- 110 6</span><br><span class="line">rwx 111 7</span><br><span class="line">rwxrw---- a.txt （二：111 110 000  十：7  6  0）</span><br><span class="line"><span class="built_in">chmod</span> 760 a.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> ugo+rwx directory1</span><br></pre></td></tr></table></figure>

<h3 id="4-2-3-新建文件和目录的默认权限"><a href="#4-2-3-新建文件和目录的默认权限" class="headerlink" title="4.2.3 新建文件和目录的默认权限"></a>4.2.3 新建文件和目录的默认权限</h3><p>umask值可以控制创建文件、文件夹时的默认权限</p>
<ul>
<li><p>新建文件的默认权限: 666-umask值，如果所得结果某位存在执行（奇数）权限，则将其权限+1,偶数不变</p>
<ul>
<li>基于安全考虑，默认新建的文件没有执行权限，这就是为什么奇数加1的原因</li>
</ul>
</li>
<li><p>新建目录的默认权限: 777-umask值</p>
</li>
</ul>
<p>root用户的umask默认值为022</p>
<ul>
<li><p>文件的权限：644</p>
</li>
<li><p>文件夹的权限：755</p>
</li>
</ul>
<p>其他用户的umask默认值为002</p>
<ul>
<li><p>文件的权限：664</p>
</li>
<li><p>文件夹的权限：775</p>
</li>
</ul>
<p>umask设置越小，权限越大，慎用！</p>
<p>查看umask</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">umask</span></span><br><span class="line"><span class="comment">#模式方式显示</span></span><br><span class="line"><span class="built_in">umask</span> –S</span><br><span class="line"><span class="comment">#输出可被调用</span></span><br><span class="line"><span class="built_in">umask</span> –p</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#<span class="built_in">umask</span></span><br><span class="line">0022            <span class="comment">#0表示八进制。022影响新建文件的权限</span></span><br><span class="line">[root@centos8 ~]#<span class="built_in">umask</span> -S</span><br><span class="line">u=rwx,g=rx,o=rx</span><br><span class="line">[root@centos8 ~]#<span class="built_in">umask</span> -p</span><br><span class="line"><span class="built_in">umask</span> 0022</span><br></pre></td></tr></table></figure>

<p>修改umask</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">umask</span> 002</span><br><span class="line"><span class="built_in">umask</span> u=rw,g=r,o=</span><br></pre></td></tr></table></figure>

<p>持久保存umask</p>
<ul>
<li><p>全局设置： &#x2F;etc&#x2F;bashrc</p>
</li>
<li><p>用户设置：~&#x2F;.bashrc</p>
</li>
</ul>
<p>范例：只实现临时文件权限为000 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#第一种</span></span><br><span class="line"><span class="built_in">touch</span> a.txt ;<span class="built_in">chmod</span> 000 a.txt</span><br><span class="line"><span class="comment">#第二种</span></span><br><span class="line"><span class="built_in">umask</span> 777 ;<span class="built_in">touch</span> a.txt ;<span class="built_in">umask</span> 022</span><br><span class="line"><span class="comment">#第三种</span></span><br><span class="line">(<span class="built_in">umask</span> 777;<span class="built_in">touch</span> a.txt)</span><br></pre></td></tr></table></figure>

<h3 id="4-2-4-特殊权限"><a href="#4-2-4-特殊权限" class="headerlink" title="4.2.4 特殊权限"></a>4.2.4 特殊权限</h3><h4 id="4-2-4-1-SUID"><a href="#4-2-4-1-SUID" class="headerlink" title="4.2.4.1 SUID"></a>4.2.4.1 SUID</h4><p>SUID 作用于二进制可执行文件上，用户将继承此程序所有者的权限</p>
<ul>
<li><p>给命令文件加的权限 <code>chmod u+s /usr/bin/passwd</code></p>
</li>
<li><p>加了suid权限的命令在启动时的用户身份会用自己的命令文件的属主身份</p>
</li>
<li><p>数字代号：4</p>
</li>
</ul>
<p>前提：进程有属主和属组；文件有属主和属组</p>
<ul>
<li><p>任何一个可执行程序文件能不能启动为进程,取决发起者对程序文件是否拥有执行权限</p>
</li>
<li><p>启动为进程之后，其进程的属主为发起者,进程的属组为发起者所属的组</p>
</li>
<li><p>进程访问文件时的权限，取决于进程的发起者</p>
</li>
</ul>
<p>二进制的可执行文件上SUID权限功能：</p>
<ul>
<li><p>任何一个可执行程序文件能不能启动为进程：取决发起者对程序文件是否拥有执行权限</p>
</li>
<li><p>启动为进程之后，其进程的属主为原程序文件的属主</p>
</li>
<li><p>SUID只对二进制可执行程序有效</p>
</li>
<li><p>SUID设置在目录上无意义</p>
</li>
</ul>
<p>SUID权限设定</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+s FILE...</span><br><span class="line"><span class="built_in">chmod</span> 4xxx FILE</span><br><span class="line"><span class="built_in">chmod</span> u-s FILE...</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#<span class="built_in">ls</span> -l /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x. 1 root root 34928 May 11  2019 /usr/bin/passwd</span><br></pre></td></tr></table></figure>

<h4 id="4-2-4-2-SGID"><a href="#4-2-4-2-SGID" class="headerlink" title="4.2.4.2 SGID"></a>4.2.4.2 SGID</h4><p>作于于目录上, 此目录中新建的文件的所属组将自动从此目录继承</p>
<ul>
<li><p>可以给文件夹加 <code>chmod g+s /aaa</code></p>
</li>
<li><p>后续在&#x2F;aaa 文件夹下创建的文件、文件夹的属组都会继承自&#x2F;aaa文件夹的属组</p>
</li>
<li><p>数字代号：2</p>
</li>
</ul>
<p>二进制的可执行文件上SGID权限功能：</p>
<ul>
<li><p>任何一个可执行程序文件能不能启动为进程：取决发起者对程序文件是否拥有执行权限</p>
</li>
<li><p>启动为进程之后，其进程的属组为原程序文件的属组</p>
</li>
</ul>
<p>SGID权限设定</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> g+s FILE...</span><br><span class="line"><span class="built_in">chmod</span> 2xxx FILE</span><br><span class="line"><span class="built_in">chmod</span> g-s FILE...</span><br></pre></td></tr></table></figure>

<p>目录上的SGID权限功能：默认情况下，用户创建文件时，其属组为此用户所属的主组，一旦某目录被设定了SGID，则对此目录有写权限的用户在此目录中创建的文件所属的组为此目录的属组，通常用于创建一个协作目录</p>
<h4 id="4-2-4-3-Sticky"><a href="#4-2-4-3-Sticky" class="headerlink" title="4.2.4.3 Sticky"></a>4.2.4.3 Sticky</h4><p>STICKY 作用于目录上，此目录中的文件只能由所有者或者root来删除，sticky 设置在文件上无意义</p>
<ul>
<li><p><code>chmod o+t /share</code></p>
</li>
<li><p>在&#x2F;share文件下的文件只能被root用户及属主自己操作</p>
</li>
<li><p>数字代号：1</p>
</li>
</ul>
<p>Sticky权限设定</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> o+t DIR...</span><br><span class="line"><span class="built_in">chmod</span> 1xxx DIR</span><br><span class="line"><span class="built_in">chmod</span> o-t DIR...</span><br></pre></td></tr></table></figure>

<h2 id="4-3-特殊属性"><a href="#4-3-特殊属性" class="headerlink" title="4.3 特殊属性"></a>4.3 特殊属性</h2><p>设置文件的特殊属性，可以访问 root 用户误操作删除或修改文件，限制root的权限</p>
<p>不能删除，改名，更改：chattr +i file</p>
<p>只能追加内容，不能删除，改名：chattr +a file</p>
<p>显示特定属性：lsattr</p>
<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]#chattr +i a.txt </span><br><span class="line">[root@centos7 ~]#lsattr a.txt</span><br><span class="line">----i----------- a.txt</span><br><span class="line">[root@centos7 ~]#<span class="built_in">rm</span> -rf a.txt</span><br><span class="line"><span class="built_in">rm</span>: cannot remove ‘a.txt’: Operation not permitted</span><br><span class="line">[root@centos7 ~]#<span class="built_in">echo</span> aaa &gt;&gt; a.txt</span><br><span class="line">-bash: a.txt: Permission denied</span><br><span class="line">[root@centos7 ~]#<span class="built_in">mv</span> a.txt p.txt</span><br><span class="line"><span class="built_in">mv</span>: cannot move ‘a.txt’ to ‘p.txt’: Operation not permitted</span><br><span class="line">[root@centos7 ~]#<span class="built_in">cat</span> a.txt</span><br><span class="line">BEGIN&#123;<span class="built_in">print</span> strftime(<span class="string">&quot;%Y-%m-%dT%H:%M&quot;</span>,systime()-3600)&#125;</span><br><span class="line">[root@centos7 ~]#chattr -i a.txt </span><br><span class="line">[root@centos7 ~]#lsattr a.txt</span><br><span class="line">---------------- a.txt</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">chattr +a file1   <span class="comment">#只允许以追加方式读写文件</span></span><br><span class="line">chattr +c file1   <span class="comment">#允许这个文件能被内核自动压缩/解压</span></span><br><span class="line">chattr +d file1   <span class="comment">#在进行文件系统备份时，dump程序将忽略这个文件</span></span><br><span class="line">chattr +i file1   <span class="comment">#设置成不可变的文件，不能被删除、修改、重命名或者链接</span></span><br><span class="line">chattr +s file1   <span class="comment">#允许一个文件被安全地删除</span></span><br><span class="line">chattr +S file1   <span class="comment">#一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘</span></span><br><span class="line">chattr +u file1   <span class="comment">#若文件被删除，系统会允许你在以后恢复这个被删除的文件</span></span><br></pre></td></tr></table></figure>

<h2 id="4-4-访问控制列表-ACL"><a href="#4-4-访问控制列表-ACL" class="headerlink" title="4.4 访问控制列表 ACL"></a>4.4 访问控制列表 ACL</h2><h3 id="4-4-1-ACL权限功能"><a href="#4-4-1-ACL权限功能" class="headerlink" title="4.4.1 ACL权限功能"></a>4.4.1 ACL权限功能</h3><p>ACL：实现灵活的权限管理</p>
<p>除了文件的所有者，所属组和其它人，可以对更多的用户设置权限，比如对单个用户设置权限</p>
<p>CentOS7 默认创建的xfs和ext4文件系统具有ACL功能</p>
<p>CentOS7 之前版本，默认手工创建的ext4文件系统无ACL功能,需手动增加</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tune2fs –o acl /dev/sdb1</span><br><span class="line">mount –o acl /dev/sdb1 /mnt/test</span><br></pre></td></tr></table></figure>

<p>ACL生效顺序：所有者，自定义用户，所属组|自定义组，其他人</p>
<h3 id="4-4-2-ACL相关命令"><a href="#4-4-2-ACL相关命令" class="headerlink" title="4.4.2 ACL相关命令"></a>4.4.2 ACL相关命令</h3><p>setfacl 可设置ACL权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">setfacl [-bkndRLPvh] [&#123;-m|-x&#125; acl_spec] [&#123;-M|-X&#125; acl_file] file ...</span><br><span class="line"></span><br><span class="line">-m  <span class="comment">#修改acl权限</span></span><br><span class="line">-M  <span class="comment">#从文件读取规则</span></span><br><span class="line">-x  <span class="comment">#删除文件acl 权限</span></span><br><span class="line">-Xe <span class="comment">#从文件读取规则</span></span><br><span class="line">-b  <span class="comment">#删除文件所有acl权限</span></span><br><span class="line">-k  <span class="comment">#删除默认acl规则</span></span><br><span class="line">-n  <span class="comment">#不重新计算mask值</span></span><br><span class="line">-d  <span class="comment">#在目录上设置默认acl</span></span><br><span class="line">-R  <span class="comment">#递归执行</span></span><br><span class="line">-L  <span class="comment">#将acl 应用在软链接指向的目标文件上，与-R一起使用</span></span><br><span class="line">-P  <span class="comment">#将acl 不应用在软链接指向的目标文件上，与-R一起使用</span></span><br><span class="line">--<span class="built_in">set</span>       <span class="comment">#用新规则替换旧规则，会删除原有ACL项，用新的替代，一定要包含UGO的设置，不能象 -m一样只有 ACL</span></span><br><span class="line">--set-file  <span class="comment">#从文件读取新规则</span></span><br><span class="line">--mask      <span class="comment">#重新计算mask值</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对单个用户设置权限</span></span><br><span class="line">setfacl -m u:username:rwx|0(-) file <span class="comment">#u表示用户，rwx表示赋予什么权限，不赋予权限表示0(-)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##清除所有ACL权限</span></span><br><span class="line">setfacl -b file1</span><br><span class="line"></span><br><span class="line"><span class="comment">#复制file1的acl权限给file2</span></span><br><span class="line">getfacl file1 | setfacl --set-file=-  file2 </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置 tom 无任何权限</span></span><br><span class="line">[root@ubuntu2204 tmp]# setfacl -m u:tom:- f1</span><br><span class="line">[root@ubuntu2204 tmp]# getfacl f1</span><br><span class="line"><span class="comment"># file: f1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:tom:---</span><br><span class="line">group::r--</span><br><span class="line">mask::r--</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure>

<p>范例：给组加ACL</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu2204 tmp]# setfacl -m g:tom:rwx f1</span><br><span class="line">[root@ubuntu2204 tmp]# getfacl f1</span><br><span class="line"><span class="comment"># file: f1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:mage:---</span><br><span class="line">user:jerry:rw-</span><br><span class="line">group::r--</span><br><span class="line">group:tom:rwx</span><br><span class="line">mask::rwx</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure>

<p>范例：–set替换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu2204 tmp]# ll f2</span><br><span class="line">-rw-rwxr--+ 1 root root 3 Jun 26 20:17 f2</span><br><span class="line">[root@ubuntu2204 tmp]# getfacl f2</span><br><span class="line"><span class="comment"># file: f2</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:mage:---</span><br><span class="line">user:jerry:rw-</span><br><span class="line">group::r--</span><br><span class="line">group:tom:rwx</span><br><span class="line">mask::rwx</span><br><span class="line">other::r--</span><br><span class="line"></span><br><span class="line">[root@ubuntu2204 tmp]# setfacl --<span class="built_in">set</span> u::rw,u:jerry:-,g::-,o::- f2</span><br><span class="line">[root@ubuntu2204 tmp]# ll f2</span><br><span class="line">-rw-------+ 1 root root 3 Jun 26 20:17 f2</span><br><span class="line"></span><br><span class="line">[root@ubuntu2204 tmp]# getfacl f2</span><br><span class="line"><span class="comment"># file: f2</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:jerry:---</span><br><span class="line">group::---</span><br><span class="line">mask::---</span><br><span class="line">other::---</span><br></pre></td></tr></table></figure>

<p>范例：设置wu用户不能访问data目录下的a2.txt文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 data]#ll a2.txt </span><br><span class="line">-rw-r--r--. 1 root root 12 Aug 16 16:59 a2.txt</span><br><span class="line">[root@centos7 data]#su wu</span><br><span class="line">[wu@centos7 data]<span class="variable">$cat</span> a2.txt </span><br><span class="line">a</span><br><span class="line">e</span><br><span class="line">f</span><br><span class="line">d</span><br><span class="line">g</span><br><span class="line">h</span><br><span class="line">[wu@centos7 data]<span class="variable">$exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">[root@centos7 data]#setfacl -m u:wu:0 a2.txt </span><br><span class="line">[root@centos7 data]#ll a2.txt </span><br><span class="line">-rw-r--r--+ 1 root root 12 Aug 16 16:59 a2.txt</span><br><span class="line">[root@centos7 data]#su wu</span><br><span class="line">[wu@centos7 data]<span class="variable">$cat</span> a2.txt </span><br><span class="line"><span class="built_in">cat</span>: a2.txt: Permission denied</span><br></pre></td></tr></table></figure>

<p>getfacl 可查看设置的ACL权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 data]#getfacl a2.txt</span><br><span class="line"><span class="comment"># file: a2.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:wu:---</span><br><span class="line">group::r--</span><br><span class="line">mask::r--</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure>

<p>mask 权限</p>
<ul>
<li><p>mask只影响除所有者和other的之外的人和组的最大权限</p>
</li>
<li><p>mask需要与用户的权限进行逻辑与运算后，才能变成有限的权限(Effective Permission)</p>
</li>
<li><p>用户或组的设置必须存在于mask权限设定范围内才会生效</p>
</li>
</ul>
<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m mask::rx file</span><br></pre></td></tr></table></figure>

<p>对于脚本程序来讲，必须先要有读权限，才能执行</p>
<h2 id="4-5-切换用户或以其他用户身份执行命令"><a href="#4-5-切换用户或以其他用户身份执行命令" class="headerlink" title="4.5 切换用户或以其他用户身份执行命令"></a>4.5 切换用户或以其他用户身份执行命令</h2><p>如果在当前登录终端中，要执行某条命令，但当前登录用户又没有可执行权限或没有某些资源权限；则在此种情况下，我们可以：</p>
<ol>
<li>让有权限的用户登录终端，再执行相应的操作；</li>
<li>在当前终端终，临时切换，以有权限的用户的身份去执行命令；</li>
</ol>
<h3 id="4-5-1-su切换用户"><a href="#4-5-1-su切换用户" class="headerlink" title="4.5.1 su切换用户"></a>4.5.1 su切换用户</h3><p>su: 即 switch user，命令可以切换用户身份，并且以指定用户的身份执行命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">su [options...] [-] [user [args...]]</span><br><span class="line"></span><br><span class="line">-c&lt;指令&gt;或--<span class="built_in">command</span>=&lt;指令&gt; 　<span class="comment">#不切换用户，而是临时使用该用户权限和环境执行命令</span></span><br><span class="line">-f或--fast 　<span class="comment">#适用于csh与tsch，使shell不用去读取启动文件。</span></span><br><span class="line">-l或--login  <span class="comment">#完全切换，改变身份时，也同时变更工作目录，以及HOME,SHELL,USER,LOGNAME。此外，也会变更PATH变量  </span></span><br><span class="line">-m,-p或--preserve-environment 　<span class="comment">#变更身份时，不要变更环境变量。</span></span><br><span class="line">-s&lt;shell&gt;或--shell=&lt;shell&gt; <span class="comment">#指定要执行的shell（bash csh tcsh 等），预设值为 /etc/passwd 内的该使用者（USER） shell</span></span><br></pre></td></tr></table></figure>

<p>按照进入shell环境方式的不同，分为两种</p>
<ul>
<li><p>登录shell：登录账号密码，<code>su - egon</code></p>
<ul>
<li>会读取目标用户的配置文件，切换至自已的家目录</li>
</ul>
</li>
<li><p>非登录shell：在shell环境中直接输入命令进入的shell环境，<code>su egon</code></p>
<ul>
<li>不会读取目标用户的配置文件，不改变当前工作目录</li>
<li>切换新用户后，使用 exit 退回旧的用户身份，而不要再用 su 切换至旧用户，否则会生成很多的bash子进程，环境可能会混乱</li>
</ul>
</li>
</ul>
<p>二者的区别的就是加载的配置文件不同</p>
<ul>
<li>登录shell</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/profile</span><br><span class="line">/etc/profile.d/脚本</span><br><span class="line">/etc/bashrc  <span class="comment"># rocky9才加载的</span></span><br><span class="line">~/.bash_profile</span><br><span class="line">~/.bashrc</span><br></pre></td></tr></table></figure>

<ul>
<li>非登录shell</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~/.bashrc</span><br><span class="line">/etc/bashrc</span><br><span class="line">/etc/profile.d/脚本</span><br></pre></td></tr></table></figure>

<p>注意: 如果全局配置和个人配置产生冲突，以个人配置为准。</p>
<p>直接以另一个用户执行命令，而不切换用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su [-] UserName -c <span class="string">&#x27;COMMAND&#x27;</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#su - wang -c <span class="string">&#x27;touch wang.txt&#x27;</span></span><br><span class="line">[root@centos8 ~]#ll ~wang/</span><br><span class="line">total 0</span><br><span class="line">-rw-rw-r-- 1 wang wang 0 Mar 27 09:31 wang1.txt</span><br><span class="line">-rw-rw-r-- 1 wang wang 0 Mar 27 09:32 wang2.txt</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#su -s /bin/bash -c <span class="string">&#x27;whoami&#x27;</span> bin</span><br><span class="line">bin</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#su -s /bin/bash bin</span><br><span class="line">bash-4.4$ <span class="built_in">whoami</span></span><br><span class="line">bin</span><br><span class="line">bash-4.4$</span><br></pre></td></tr></table></figure>

<p>完全切换和不完全切换的区别</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">jose@ubuntu2204:~$ <span class="built_in">pwd</span></span><br><span class="line">/home/jose</span><br><span class="line">jose@ubuntu2204:~$ <span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin</span><br><span class="line"></span><br><span class="line"><span class="comment">#不完全切换</span></span><br><span class="line">jose@ubuntu2204:~$ su root</span><br><span class="line">Password:</span><br><span class="line">[root@ubuntu2204 jose]# <span class="built_in">pwd</span></span><br><span class="line">/home/jose</span><br><span class="line">[root@ubuntu2204 jose]# <span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin</span><br><span class="line"></span><br><span class="line"><span class="comment">#完全切换</span></span><br><span class="line">jose@ubuntu2204:~$ su - root</span><br><span class="line">Password:</span><br><span class="line">[root@ubuntu2204 ~]# <span class="built_in">pwd</span></span><br><span class="line">/root</span><br><span class="line">[root@ubuntu2204 ~]# <span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/root/bin</span><br></pre></td></tr></table></figure>

<h3 id="4-5-2-sudo"><a href="#4-5-2-sudo" class="headerlink" title="4.5.2 sudo"></a>4.5.2 sudo</h3><p>让普通用户只用自己的账号密码进行认证，操作时可以临时获取管理的某种权限</p>
<p>修改sudo配置文件的两种方式</p>
<ul>
<li><p><code>visudo</code></p>
<ul>
<li>专门编辑文件&#x2F;etc&#x2F;sudoers</li>
<li><code>visudo -c</code> # 检查文件语法</li>
</ul>
</li>
<li><p><code>vi /etc/sudoers</code></p>
</li>
</ul>
<p>详细看 《加密与安全》</p>
<h3 id="4-5-3-超级用户说明"><a href="#4-5-3-超级用户说明" class="headerlink" title="4.5.3 超级用户说明"></a>4.5.3 超级用户说明</h3><p>1、在生产环境中，一般会禁止root帐号通过SSH远程连接服务器（保护好皇帝），当然了，也会更改默认的SSH端口（保护好皇宫），以加强系统安全。</p>
<p>2、企业工作中：没有特殊需求，应该尽量不要登录root用户进行操作，应该在普通用户下操作任务，然后用sudo管理普通用户的权限，可以细到每个命令权限分配。</p>
<p>3、在linux系统中，uid为0的用户就是超级用户。但是通常不这么做，如果确实有必要在某一操作上用到管理的权限的话，那就用sudo单独授权，也不要直接用uid为0的用户。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://AquaPluto.github.io">Aquarius</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://aquapluto.github.io/Linux/basics/user-permission/">https://aquapluto.github.io/Linux/basics/user-permission/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://AquaPluto.github.io" target="_blank">代码推演录</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux%E5%9F%BA%E7%A1%80/">linux基础</a></div><div class="post-share"><div class="social-share" data-image="/img/paper2.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://unpkg.com/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/Linux/basics/regular-expression/" title="正则表达式"><img class="cover" src="/img/paper6.png" onerror="onerror=null;src='/img/error-page.png'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">正则表达式</div></div><div class="info-2"><div class="info-item-1">1 基本正则表达式正则表达式匹配的...</div></div></div></a><a class="pagination-related" href="/Linux/basics/file-structure-and-IO-redirects/" title="文件结构与IO重定向"><img class="cover" src="/img/paper5.png" onerror="onerror=null;src='/img/error-page.png'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">文件结构与IO重定向</div></div><div class="info-2"><div class="info-item-1">1 文件系统目录结构  文件和目录...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/Linux/basics/file-structure-and-IO-redirects/" title="文件结构与IO重定向"><img class="cover" src="/img/paper5.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-19</div><div class="info-item-2">文件结构与IO重定向</div></div><div class="info-2"><div class="info-item-1">1 文件系统目录结构  文件和目录...</div></div></div></a><a class="pagination-related" href="/Linux/basics/GSA/" title="文本处理三剑客"><img class="cover" src="/img/paper6.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-21</div><div class="info-item-2">文本处理三剑客</div></div><div class="info-2"><div class="info-item-1">一、grep作用：文本搜索工具，根...</div></div></div></a><a class="pagination-related" href="/Linux/basics/regular-expression/" title="正则表达式"><img class="cover" src="/img/paper6.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-19</div><div class="info-item-2">正则表达式</div></div><div class="info-2"><div class="info-item-1">1 基本正则表达式正则表达式匹配的...</div></div></div></a><a class="pagination-related" href="/Linux/basics/file-command/" title="文件管理工具"><img class="cover" src="/img/paper1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-21</div><div class="info-item-2">文件管理工具</div></div><div class="info-2"><div class="info-item-1">1 文件通配符匹配文件名的字符串 ...</div></div></div></a><a class="pagination-related" href="/Linux/basics/introduce/" title="linux介绍"><img class="cover" src="/img/paper3.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-18</div><div class="info-item-2">linux介绍</div></div><div class="info-2"><div class="info-item-1">1 系统构成与shell核心1.1...</div></div></div></a><a class="pagination-related" href="/Linux/basics/text-command/" title="文本管理工具"><img class="cover" src="/img/paper5.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-21</div><div class="info-item-2">文本管理工具</div></div><div class="info-2"><div class="info-item-1">1 文本编译工具vim常用选项 1...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avator.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Aquarius</div><div class="author-info-description">分享运维开发相关技术</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">138</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">42</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" href="https://github.com/AquaPluto"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/AquaPluto" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://blog.csdn.net/m0_75233142" target="_blank" title="CSDN"><i class="fa-solid fa-code" style="color: #8a2be2;"></i></a><a class="social-icon" href="mailto:wujunlinq@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><p>持续更新文章中，有问题请添加wx</p>
<div>
  <img src="/img/wx.jpg" alt="wx" style="width: 100px">
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Linux%E6%9D%83%E9%99%90%E6%A8%A1%E5%9E%8B"><span class="toc-text">1 Linux权限模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E7%94%A8%E6%88%B7"><span class="toc-text">1.1 用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E7%94%A8%E6%88%B7%E7%BB%84"><span class="toc-text">1.2 用户组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">1.3 用户和组的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E5%AE%89%E5%85%A8%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">1.4 安全上下文</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-text">2 用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E7%94%A8%E6%88%B7%E5%88%9B%E5%BB%BA"><span class="toc-text">2.1 用户创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%94%A8%E6%88%B7%E5%B1%9E%E6%80%A7%E4%BF%AE%E6%94%B9"><span class="toc-text">2.2 用户属性修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-text">2.3 删除用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7%E7%9B%B8%E5%85%B3%E7%9A%84ID%E4%BF%A1%E6%81%AF"><span class="toc-text">2.4 查看用户相关的ID信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81"><span class="toc-text">2.5 设置密码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-openssl-passwd"><span class="toc-text">2.5.1 openssl passwd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-passwd"><span class="toc-text">2.5.2 passwd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-3-chpassed"><span class="toc-text">2.5.3 chpassed</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5"><span class="toc-text">2.6 修改用户密码策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E7%94%A8%E6%88%B7%E6%96%87%E4%BB%B6"><span class="toc-text">2.7 用户文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-1-etc-passwd"><span class="toc-text">2.7.1 &#x2F;etc&#x2F;passwd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-2-etc-shadow"><span class="toc-text">2.7.2 &#x2F;etc&#x2F;shadow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-3-%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6"><span class="toc-text">2.7.3 其他文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E7%BB%84%E7%AE%A1%E7%90%86"><span class="toc-text">3 组管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%88%9B%E5%BB%BA%E7%BB%84"><span class="toc-text">3.1 创建组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E4%BF%AE%E6%94%B9%E7%BB%84"><span class="toc-text">3.2 修改组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E5%88%A0%E9%99%A4%E7%BB%84"><span class="toc-text">3.3 删除组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E6%B7%BB%E5%8A%A0%E3%80%81%E6%9B%B4%E6%94%B9%E5%92%8C%E6%9F%A5%E7%9C%8B%E7%BB%84%E6%88%90%E5%91%98"><span class="toc-text">3.4 添加、更改和查看组成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E7%BB%84%E6%96%87%E4%BB%B6"><span class="toc-text">3.5 组文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-1-etc-group"><span class="toc-text">3.5.1 &#x2F;etc&#x2F;group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-2-etc-gshadow"><span class="toc-text">3.5.2 &#x2F;etc&#x2F;gshadow</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-text">4 权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85%E5%92%8C%E6%89%80%E5%B1%9E%E7%BB%84"><span class="toc-text">4.1 修改文件所有者和所属组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85"><span class="toc-text">4.1.1 修改文件所有者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E5%B1%9E%E7%BB%84"><span class="toc-text">4.1.2 修改文件所属组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="toc-text">4.2 文件权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E8%AF%B4%E6%98%8E"><span class="toc-text">4.2.1 文件权限说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="toc-text">4.2.2 修改文件权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%9A%84%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90"><span class="toc-text">4.2.3 新建文件和目录的默认权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="toc-text">4.2.4 特殊权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-4-1-SUID"><span class="toc-text">4.2.4.1 SUID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-4-2-SGID"><span class="toc-text">4.2.4.2 SGID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-4-3-Sticky"><span class="toc-text">4.2.4.3 Sticky</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E7%89%B9%E6%AE%8A%E5%B1%9E%E6%80%A7"><span class="toc-text">4.3 特殊属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8-ACL"><span class="toc-text">4.4 访问控制列表 ACL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-ACL%E6%9D%83%E9%99%90%E5%8A%9F%E8%83%BD"><span class="toc-text">4.4.1 ACL权限功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-ACL%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">4.4.2 ACL相关命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7%E6%88%96%E4%BB%A5%E5%85%B6%E4%BB%96%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-text">4.5 切换用户或以其他用户身份执行命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-1-su%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7"><span class="toc-text">4.5.1 su切换用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-2-sudo"><span class="toc-text">4.5.2 sudo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-3-%E8%B6%85%E7%BA%A7%E7%94%A8%E6%88%B7%E8%AF%B4%E6%98%8E"><span class="toc-text">4.5.3 超级用户说明</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/role/" title="Role角色"><img src="/img/paper4.png" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="Role角色"/></a><div class="content"><a class="title" href="/CICD/ansible/role/" title="Role角色">Role角色</a><time datetime="2025-09-13T10:07:53.000Z" title="发表于 2025-09-13 18:07">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/playbook/" title="PlayBook"><img src="/img/paper5.png" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="PlayBook"/></a><div class="content"><a class="title" href="/CICD/ansible/playbook/" title="PlayBook">PlayBook</a><time datetime="2025-09-13T10:07:48.000Z" title="发表于 2025-09-13 18:07">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/module/" title="常用模块"><img src="/img/paper1.jpg" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="常用模块"/></a><div class="content"><a class="title" href="/CICD/ansible/module/" title="常用模块">常用模块</a><time datetime="2025-09-13T10:07:42.000Z" title="发表于 2025-09-13 18:07">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/command/" title="相关命令"><img src="/img/paper3.png" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="相关命令"/></a><div class="content"><a class="title" href="/CICD/ansible/command/" title="相关命令">相关命令</a><time datetime="2025-09-13T10:07:38.000Z" title="发表于 2025-09-13 18:07">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/deploy/" title="部署与配置"><img src="/img/paper2.jpg" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="部署与配置"/></a><div class="content"><a class="title" href="/CICD/ansible/deploy/" title="部署与配置">部署与配置</a><time datetime="2025-09-13T10:07:29.000Z" title="发表于 2025-09-13 18:07">2025-09-13</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Aquarius</span></div><div class="footer_custom_text"><style>
div#runtime {
  font-size: 13px;
  font-weight: bold;
}

div#ghbdages_list {
  height: 1.5rem;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 10px
}

.github-badge {
  display: flex;
  align-items: center;
  margin-inline: 6px;
}
</style>
<div id="runtime"></div>
<div id="ghbdages"></div>
<script>
  function createtime() {
    const now = new Date();
    const grt = new Date("08/01/2025 00:00:00"); // 网站诞生时间

    // 计算天、小时、分钟和秒
    const days = Math.floor((now - grt) / (1000 * 60 * 60 * 24));
    const hours = Math.floor(((now - grt) / (1000 * 60 * 60)) % 24)
      .toString()
      .padStart(2, "0");
    const minutes = Math.floor(((now - grt) / (1000 * 60)) % 60)
      .toString()
      .padStart(2, "0");
    const seconds = Math.floor(((now - grt) / 1000) % 60)
      .toString()
      .padStart(2, "0");

    // HTML 输出
    const currentTimeHtml = `
          <div>
              本站已运行 ${days} 天 ${hours} 小时 ${minutes} 分 ${seconds} 秒 
          </div>`;

    const runtime = document.getElementById("runtime");
    if (runtime) runtime.innerHTML = currentTimeHtml;
  }

  // 设置每秒调用函数
  setInterval(createtime, 1000);

  function renderBadge() {
    const currentTimeHtml = `
      <div id="ghbdages_list">
          <a class="github-badge" target="_blank" href="https://hexo.io/" title="hexo:7.3.0">
              <img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=hexo" alt="Static Badge">
          </a>
          <a class="github-badge" target="_blank" href="https://github.com/" title="github">
              <img src="https://img.shields.io/badge/Code-GitHub-181717?logo=GitHub&color=%23FF7102" alt="Static Badge">
          </a>
          <a class="github-badge" target="_blank" href="https://vercel.com/" title="vercel">
              <img src="https://img.shields.io/badge/Host-Vercel-%23F0D722?logo=Vercel" alt="Static Badge">
          </a>
          <a class="github-badge" target="_blank" href="https://analytics.sysio.ai/" title="umami">
              <img src="https://img.shields.io/badge/Analytics-Umami-%237FB100?logo=umami&logoColor=%237FB100" alt="Static Badge">
          </a>
      </div>`;

    const ghbdages = document.getElementById("ghbdages");
    if (ghbdages) {
      ghbdages.innerHTML = currentTimeHtml;
    }
  }

  window.onload = renderBadge;
</script>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://unpkg.com/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="https://unpkg.com/instant.page/instantpage.js" type="module"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://unpkg.com/mathjax/es5/tex-mml-chtml.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'forest'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://unpkg.com/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script src="https://cdn.jsdelivr.net/gh/xiabo2/CDN@latest/fishes.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://unpkg.com/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章..." type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>