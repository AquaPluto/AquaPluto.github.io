<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>磁盘分区 | 代码推演录</title><meta name="author" content="Aquarius"><meta name="copyright" content="Aquarius"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1 linux中的磁盘1.1 设备文件Linux 哲学思想：一切皆文件。对于硬件设备，在Linux系统中，也是以文件的形式呈现出来的 &#x2F;sys 文件是系统是和 &#x2F;proc 一样，是一个内存文件系统 ，在磁盘上并没有对应的内容。通常称其为sysfs，这是内核 “暴露” 给用户空间的一个 驱动模型层次结构的展现。因此，host0, host1 这些 “文件”是内核根据设备驱动程序 “发现” 的设备后在">
<meta property="og:type" content="article">
<meta property="og:title" content="磁盘分区">
<meta property="og:url" content="https://aquapluto.github.io/Linux/disk-manage/disk-partition/">
<meta property="og:site_name" content="代码推演录">
<meta property="og:description" content="1 linux中的磁盘1.1 设备文件Linux 哲学思想：一切皆文件。对于硬件设备，在Linux系统中，也是以文件的形式呈现出来的 &#x2F;sys 文件是系统是和 &#x2F;proc 一样，是一个内存文件系统 ，在磁盘上并没有对应的内容。通常称其为sysfs，这是内核 “暴露” 给用户空间的一个 驱动模型层次结构的展现。因此，host0, host1 这些 “文件”是内核根据设备驱动程序 “发现” 的设备后在">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://aquapluto.github.io/img/paper5.png">
<meta property="article:published_time" content="2025-08-21T02:59:41.000Z">
<meta property="article:modified_time" content="2025-08-28T12:33:05.197Z">
<meta property="article:author" content="Aquarius">
<meta property="article:tag" content="磁盘管理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://aquapluto.github.io/img/paper5.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "磁盘分区",
  "url": "https://aquapluto.github.io/Linux/disk-manage/disk-partition/",
  "image": "https://aquapluto.github.io/img/paper5.png",
  "datePublished": "2025-08-21T02:59:41.000Z",
  "dateModified": "2025-08-28T12:33:05.197Z",
  "author": [
    {
      "@type": "Person",
      "name": "Aquarius",
      "url": "https://AquaPluto.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://aquapluto.github.io/Linux/disk-manage/disk-partition/"><link rel="preconnect" href="//unpkg.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://unpkg.com/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '磁盘分区',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/wave.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      if ($loadingBox.classList.contains('loaded')) return
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()

  if (document.readyState === 'complete') {
    preloader.endLoading()
  } else {
    window.addEventListener('load', preloader.endLoading)
    document.addEventListener('DOMContentLoaded', preloader.endLoading)
    // Add timeout protection: force end after 7 seconds
    setTimeout(preloader.endLoading, 7000)
  }

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(/img/background.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avator.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">78</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items"><!-- 一级菜单项（非目录）--><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>计算机基础</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>计算机组成原理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/computer-composition/hardware-composition/"><span>计算机硬件组成</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/computer-composition/CPU/"><span>CPU</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/computer-composition/memory/"><span>内存</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/computer-composition/hard-disk/"><span>硬盘</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>操作系统</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/operating-system/concept/"><span>操作系统的概念</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/operating-system/processes-threads/"><span>进程与线程</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/operating-system/IO-model/"><span>IO模型</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>计算机网络</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/network/network-layer/"><span>网络层</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/network/transport-layer/"><span>传输层</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/network/application-layer/"><span>应用层</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/network/network-architecture/"><span>物理网络架构全链路</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Linux</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>linux基础</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/introduce/"><span>linux介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/file-structure-and-IO-redirects/"><span>文件结构与IO重定向</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/file-command/"><span>文件管理工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/text-command/"><span>文本管理工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/GSA/"><span>文本处理三剑客</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/user-permission/"><span>用户和权限管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/regular-expression/"><span>正则表达式</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>软件包管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/software-manage/introduce/"><span>软件包介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/software-manage/Centos/"><span>Centos软件管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/software-manage/Ubuntu/"><span>Ubuntu软件管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/software-manage/source-code-compilation/"><span>源码编译安装</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>进程管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/performance-analysis/"><span>性能分析命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/command/"><span>进程管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/signal/"><span>信号发送</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/job-parallel/"><span>作业管理与并行运行</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>磁盘管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/disk-partition/"><span>磁盘分区</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/file-system/"><span>文件系统</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/disk-command/"><span>磁盘管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/LVM/"><span>逻辑卷管理器LVM</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>网络管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/configuration/"><span>网络配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/configuration-command/"><span>网络配置命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/test-diagnostic/"><span>网络测试诊断工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/bridge/"><span>网桥配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/troubleshoot/"><span>网络问题排查</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>服务管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/DNS/"><span>域名DNS解析服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/time-synchronization/"><span>时间同步服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/plan-tasks/"><span>计划任务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/log/"><span>日志服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/file-share/"><span>文件共享服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/ssh/"><span>ssh远程连接服务</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>防火墙</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/introduce/"><span>安全技术和防火墙</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/iptables/"><span>iptables</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/firewalld/"><span>firewalld</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/nft/"><span>nft</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>加密和安全</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/security-mechanisms/"><span>安全机制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/OpenSSL/"><span>OpenSSL</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/sudo/"><span>sudo实现授权</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/PAM/"><span>PAM认证机制</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>shell编程</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/introduce/"><span>shell脚本介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/variable/"><span>变量</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/operations-conditional/"><span>运算和条件测试</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/process-control/"><span>流程控制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/function/"><span>函数</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/array/"><span>数组</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/string/"><span>字符串</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/script-tools/"><span>脚本相关工具</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Linux/system-optimization/"><span>系统优化</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>数据库</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>MySQL</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/MySQL/SQL%E8%AF%AD%E5%8F%A5/"><span>SQL语句</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Redis</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Redis/Redis%E5%AE%89%E8%A3%85/"><span>Redis安装</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>中间件</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Nginx</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Nginx/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>HAProxy</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/HAProxy/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Keepalived</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Keepalived/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Kafka</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kafka/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Tomcat</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kafka/111/"><span>111</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>日志</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/ELK/111/"><span>111</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>容器</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/basics/"><span>容器基础</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Docker</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>镜像管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>容器管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>数据卷</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>网络模式</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>docker compose</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>构建镜像</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/container/mirror/"><span>概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/mirror/"><span>dockerfile</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/mirror/"><span>docker build构建镜像</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/mirror/"><span>分布式镜像仓库Harbor</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>容器进程</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/container/process/"><span>容器里的进程管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/process/"><span>cpu cgroup使用</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/process/"><span>监控容器真实的cpu使用率</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/process/"><span>不可中断睡眠对容器的影响</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/memory/"><span>容器内存</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/storage/"><span>容器存储</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/network/"><span>容器网络</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/safe/"><span>容器安全</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/containerd/"><span>containerd</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Kubernetes</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/conspect/"><span>概论</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/deploy/"><span>部署安装</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/pod/"><span>Pod</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/controller/"><span>控制器</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/service-loadbalancer/"><span>服务发现与负载均衡</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/data-storage/"><span>数据存储持久化</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/certification-authentication/"><span>认证与鉴权体系</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/network/"><span>网络</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/helm/"><span>Helm</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/monitor/"><span>监控</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>监控</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/monitor/conspect/"><span>监控概论</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Prometheus</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/introduce/"><span>概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/deploy/"><span>部署安装</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/exporter/"><span>Exporter</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/promql/"><span>PromQL</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/query-results-persist/"><span>查询结果持久化</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/service-discovery/"><span>服务发现</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/indicators-re-marked/"><span>指标重新打标</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Alertmanager</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/alertmanager/introduce/"><span>告警功能概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/alertmanager/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/alertmanager/alarm/"><span>实现告警功能</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Grafana</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/grafana/deploy/"><span>部署安装</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/grafana/data-source/"><span>配置数据源</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/grafana/charts/"><span>自定义图表</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>CICD</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Ansible</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/introduce/"><span>架构概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/command/"><span>相关命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/module/"><span>常用模块</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/playbook/"><span>PlayBook</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/role/"><span>Role角色</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>SRE</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/SRE/111/"><span>111</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Python</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>python基础</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>线性表</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>列表</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>元组</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>字符串</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>哈希表</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>封装与解构</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>集合</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>字典</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>解析式与生成器表达式</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>函数</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>IO操作</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>面向对象编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>并发编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>网络编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>数据库编程</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Django</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/ELK/111/"><span>111</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/paper5.png);"><nav id="nav"><!-- 左侧博客信息区域--><span id="blog-info"><a class="nav-site-title" href="/"></a><a class="nav-page-title" href="/"><span class="site-name">磁盘分区</span></a></span><!-- 新增的导航菜单容器（居中布局关键）--><div id="nav-menus-container"><!-- 菜单主体部分--><div id="menus"><!-- 菜单项--><div class="menus_items"><!-- 一级菜单项（非目录）--><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>计算机基础</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>计算机组成原理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/computer-composition/hardware-composition/"><span>计算机硬件组成</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/computer-composition/CPU/"><span>CPU</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/computer-composition/memory/"><span>内存</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/computer-composition/hard-disk/"><span>硬盘</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>操作系统</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/operating-system/concept/"><span>操作系统的概念</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/operating-system/processes-threads/"><span>进程与线程</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/operating-system/IO-model/"><span>IO模型</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>计算机网络</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/network/network-layer/"><span>网络层</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/network/transport-layer/"><span>传输层</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/network/application-layer/"><span>应用层</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/computer-basics/network/network-architecture/"><span>物理网络架构全链路</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Linux</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>linux基础</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/introduce/"><span>linux介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/file-structure-and-IO-redirects/"><span>文件结构与IO重定向</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/file-command/"><span>文件管理工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/text-command/"><span>文本管理工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/GSA/"><span>文本处理三剑客</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/user-permission/"><span>用户和权限管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/linux-basics/regular-expression/"><span>正则表达式</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>软件包管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/software-manage/introduce/"><span>软件包介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/software-manage/Centos/"><span>Centos软件管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/software-manage/Ubuntu/"><span>Ubuntu软件管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/software-manage/source-code-compilation/"><span>源码编译安装</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>进程管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/performance-analysis/"><span>性能分析命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/command/"><span>进程管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/signal/"><span>信号发送</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/process-manage/job-parallel/"><span>作业管理与并行运行</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>磁盘管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/disk-partition/"><span>磁盘分区</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/file-system/"><span>文件系统</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/disk-command/"><span>磁盘管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/disk-manage/LVM/"><span>逻辑卷管理器LVM</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>网络管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/configuration/"><span>网络配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/configuration-command/"><span>网络配置命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/test-diagnostic/"><span>网络测试诊断工具</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/bridge/"><span>网桥配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/network-manage/troubleshoot/"><span>网络问题排查</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>服务管理</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/DNS/"><span>域名DNS解析服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/time-synchronization/"><span>时间同步服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/plan-tasks/"><span>计划任务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/log/"><span>日志服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/file-share/"><span>文件共享服务</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/service-manage/ssh/"><span>ssh远程连接服务</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>防火墙</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/introduce/"><span>安全技术和防火墙</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/iptables/"><span>iptables</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/firewalld/"><span>firewalld</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/firewall/nft/"><span>nft</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>加密和安全</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/security-mechanisms/"><span>安全机制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/OpenSSL/"><span>OpenSSL</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/sudo/"><span>sudo实现授权</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/encryption-security/PAM/"><span>PAM认证机制</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>shell编程</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/introduce/"><span>shell脚本介绍</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/variable/"><span>变量</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/operations-conditional/"><span>运算和条件测试</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/process-control/"><span>流程控制</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/function/"><span>函数</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/array/"><span>数组</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/string/"><span>字符串</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/Linux/shell/script-tools/"><span>脚本相关工具</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/Linux/system-optimization/"><span>系统优化</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>数据库</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>MySQL</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/MySQL/SQL%E8%AF%AD%E5%8F%A5/"><span>SQL语句</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Redis</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Redis/Redis%E5%AE%89%E8%A3%85/"><span>Redis安装</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>中间件</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Nginx</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Nginx/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>HAProxy</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/HAProxy/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Keepalived</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Keepalived/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Kafka</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kafka/111/"><span>111</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Tomcat</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/Kafka/111/"><span>111</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>日志</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/ELK/111/"><span>111</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>容器</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/basics/"><span>容器基础</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Docker</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>镜像管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>容器管理命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>数据卷</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>网络模式</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/docker/"><span>docker compose</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>构建镜像</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/container/mirror/"><span>概论</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/mirror/"><span>dockerfile</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/mirror/"><span>docker build构建镜像</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/mirror/"><span>分布式镜像仓库Harbor</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>容器进程</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/container/process/"><span>容器里的进程管理</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/process/"><span>cpu cgroup使用</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/process/"><span>监控容器真实的cpu使用率</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/container/process/"><span>不可中断睡眠对容器的影响</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/memory/"><span>容器内存</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/storage/"><span>容器存储</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/network/"><span>容器网络</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/safe/"><span>容器安全</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/container/containerd/"><span>containerd</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Kubernetes</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/conspect/"><span>概论</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/deploy/"><span>部署安装</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/pod/"><span>Pod</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/controller/"><span>控制器</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/service-loadbalancer/"><span>服务发现与负载均衡</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/data-storage/"><span>数据存储持久化</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/certification-authentication/"><span>认证与鉴权体系</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/network/"><span>网络</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/helm/"><span>Helm</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/kubernetes/monitor/"><span>监控</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>监控</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/monitor/conspect/"><span>监控概论</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Prometheus</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/introduce/"><span>概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/deploy/"><span>部署安装</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/exporter/"><span>Exporter</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/promql/"><span>PromQL</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/query-results-persist/"><span>查询结果持久化</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/service-discovery/"><span>服务发现</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/prometheus/indicators-re-marked/"><span>指标重新打标</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Alertmanager</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/alertmanager/introduce/"><span>告警功能概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/alertmanager/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/alertmanager/alarm/"><span>实现告警功能</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Grafana</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/grafana/deploy/"><span>部署安装</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/grafana/data-source/"><span>配置数据源</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/monitor/grafana/charts/"><span>自定义图表</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>CICD</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>Ansible</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/introduce/"><span>架构概述</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/deploy/"><span>部署与配置</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/command/"><span>相关命令</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/module/"><span>常用模块</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/playbook/"><span>PlayBook</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/CICD/ansible/role/"><span>Role角色</span></a></li></ul></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>SRE</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/SRE/111/"><span>111</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Python</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>python基础</span></a></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>线性表</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>列表</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>元组</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>字符串</span></a></li></ul></li><!-- 二级目录（包含三级菜单）--><li class="menus_item_second"><span class="site-page group second"><span>哈希表</span><i class="fas fa-chevron-right"></i></span><ul class="menus_item_child_second"><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>封装与解构</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>集合</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>字典</span></a></li><!-- 三级菜单项--><li><a class="site-page third" href="/python/111/"><span>解析式与生成器表达式</span></a></li></ul></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>函数</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>IO操作</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>面向对象编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>并发编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>网络编程</span></a></li><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/python/111/"><span>数据库编程</span></a></li></ul></div><!-- 一级目录（包含二级菜单）--><div class="menus_item"><span class="site-page group"><span>Django</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><!-- 二级菜单项（非目录）--><li><a class="site-page child" href="/ELK/111/"><span>111</span></a></li></ul></div></div></div></div><!-- 右侧功能区域（新增容器）--><div id="nav-right-container"><!-- 搜索按钮（移动到右侧）--><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i></span></div><!-- 移动端汉堡菜单按钮--><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">磁盘分区</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-08-21T02:59:41.000Z" title="发表于 2025-08-21 10:59">2025-08-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-08-28T12:33:05.197Z" title="更新于 2025-08-28 20:33">2025-08-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>34分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="1-linux中的磁盘"><a href="#1-linux中的磁盘" class="headerlink" title="1 linux中的磁盘"></a>1 linux中的磁盘</h1><h2 id="1-1-设备文件"><a href="#1-1-设备文件" class="headerlink" title="1.1 设备文件"></a>1.1 设备文件</h2><p>Linux 哲学思想：一切皆文件。对于硬件设备，在Linux系统中，也是以文件的形式呈现出来的</p>
<p><code>/sys</code> 文件是系统是和 <code>/proc</code> 一样，是一个内存文件系统 ，在磁盘上并没有对应的内容。通常称其为sysfs，这是内核 “暴露” 给用户空间的一个 驱动模型层次结构的展现。因此，host0, host1 这些 “文件”是内核根据设备驱动程序 “发现” 的设备后在内存中创建的对应的 “文件” 和 “文件层次”。</p>
<p>设备文件：关联至一个设备驱动程序，进而能够跟与之对应硬件设备进行通信</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设备文件</span></span><br><span class="line">[root@ubuntu2204 ~]# ll /dev/sda</span><br><span class="line">brw-rw---- 1 root disk 8, 0 Jul 29 08:51 /dev/sda</span><br><span class="line"></span><br><span class="line"><span class="comment">#设备文件</span></span><br><span class="line">[root@ubuntu2204 ~]# ll /dev/tty0</span><br><span class="line">crw--w---- 1 root <span class="built_in">tty</span> 4, 0 Jul 29 08:51 /dev/tty0</span><br></pre></td></tr></table></figure>

<p>设备号码：</p>
<ul>
<li>主设备号：major number, 标识设备类型</li>
<li>次设备号：minor number, 标识同一类型下的不同设备</li>
</ul>
<p>设备类型：</p>
<ul>
<li>块设备：block，存取单位“块”，磁盘</li>
<li>字符设备：char，存取单位“字符”，键盘</li>
</ul>
<p>磁盘设备的设备文件命名</p>
<table>
<thead>
<tr>
<th>设备类型</th>
<th>设备文件命名</th>
</tr>
</thead>
<tbody><tr>
<td>SAS,SATA,SCSI,IDE,USB</td>
<td>&#x2F;dev&#x2F;sda; &#x2F;dev&#x2F;sdb; &#x2F;dev&#x2F;sdc; ……</td>
</tr>
<tr>
<td>nvme协议硬盘</td>
<td>&#x2F;dev&#x2F;nvme0n1; &#x2F;dev&#x2F;nvme0n2; &#x2F;dev&#x2F;nvme0n3; ……</td>
</tr>
<tr>
<td>虚拟磁盘</td>
<td>&#x2F;dev&#x2F;vda; &#x2F;dev&#x2F;vdb; &#x2F;dev&#x2F;xvda; &#x2F;dev&#x2F;xvdb; ……</td>
</tr>
<tr>
<td>逻辑卷，从逻辑设备到物理设备的映射框架机制，在该机制下，用户可以很方便的根据自己的需要制定实现存储资源的管理策略</td>
<td>&#x2F;dev&#x2F;dm-0;&#x2F;dev&#x2F;dm-1;……</td>
</tr>
<tr>
<td>RAID设备</td>
<td>&#x2F;dev&#x2F;md0;&#x2F;dev&#x2F;md1;……</td>
</tr>
<tr>
<td>块设备</td>
<td>&#x2F;dev&#x2F;loop1;&#x2F;dev&#x2F;loop2;……</td>
</tr>
</tbody></table>
<p>不同磁盘标识：a-z,aa,ab…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda，/dev/sdb, ...</span><br></pre></td></tr></table></figure>

<p>同一设备上的不同分区：1,2, …</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda1</span><br><span class="line">/dev/sda5</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@Rocky ~]#ll /dev/nvme0*</span><br><span class="line">crw------- 1 root root 243, 0 8月  20 11:50 /dev/nvme0</span><br><span class="line">brw-rw---- 1 root disk 259, 0 8月  20 11:50 /dev/nvme0n1</span><br><span class="line">brw-rw---- 1 root disk 259, 1 8月  20 11:50 /dev/nvme0n1p1</span><br><span class="line">brw-rw---- 1 root disk 259, 2 8月  20 11:50 /dev/nvme0n1p2</span><br></pre></td></tr></table></figure>

<h2 id="1-2-磁盘操作"><a href="#1-2-磁盘操作" class="headerlink" title="1.2 磁盘操作"></a>1.2 磁盘操作</h2><p>范例：查看CHS</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#rocky8.6默认只有扇区信息，ubuntu2204同样</span></span><br><span class="line">[root@rocky8 ~]#fdisk -l /dev/sda</span><br><span class="line">Disk /dev/sda: 20 GiB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel <span class="built_in">type</span>: dos</span><br><span class="line">Disk identifier: 0x43a6eada</span><br><span class="line"></span><br><span class="line">Device     Boot   Start      End  Sectors Size Id Type</span><br><span class="line">/dev/sda1  *       2048  2099199  2097152   1G 83 Linux</span><br><span class="line">/dev/sda2       2099200 41943039 39843840  19G 8e Linux LVM</span><br><span class="line"></span><br><span class="line"><span class="comment">#加参数后可显示更详细信息</span></span><br><span class="line">[root@rocky8 ~]#fdisk -u=cylinder -l /dev/sda</span><br><span class="line">Disk /dev/sda: 20 GiB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Geometry: 255 heads, 2 sectors/track, 2610 cylinders</span><br><span class="line">Units: cylinders of 510 * 512 = 261120 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel <span class="built_in">type</span>: dos</span><br><span class="line">Disk identifier: 0x43a6eada</span><br><span class="line"></span><br><span class="line">Device     Boot Start   End Cylinders Size Id Type</span><br><span class="line">/dev/sda1  *        5  4117      4113   1G 83 Linux</span><br><span class="line">/dev/sda2        4117 82242     78126  19G 8e Linux LVM</span><br></pre></td></tr></table></figure>

<p>范例：识别SSD和机械硬盘类型</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1表示机械，0表示SSD</span></span><br><span class="line">[root@centos8 ~]#lsblk -d -o name,rota</span><br><span class="line">NAME  ROTA</span><br><span class="line">sda     1</span><br><span class="line">sr0     1</span><br><span class="line">nvme0n1   0</span><br><span class="line">nvme0n2   0</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#<span class="built_in">ls</span> /sys/block/</span><br><span class="line">nvme0n1 nvme0n2 sda sr0</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#<span class="built_in">cat</span> /sys/block/*/queue/rotational</span><br><span class="line">0</span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">1</span><br><span class="line">[root@centos8 ~]#<span class="built_in">cat</span> /sys/block/sda/queue/rotational</span><br><span class="line">1</span><br><span class="line">[root@centos8 ~]#<span class="built_in">cat</span> /sys/block/sr0/queue/rotational</span><br><span class="line">1</span><br><span class="line">[root@centos8 ~]#<span class="built_in">cat</span> /sys/block/nvme0n1/queue/rotational</span><br><span class="line">0</span><br><span class="line">[root@centos8 ~]#<span class="built_in">cat</span> /sys/block/nvme0n2/queue/rotational</span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<p>范例: 测速</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu1804 ~]#<span class="built_in">dd</span> | hdparm -t /dev/sda</span><br><span class="line">/dev/sda:</span><br><span class="line">Timing buffered disk reads: 1854 MB <span class="keyword">in</span>  3.00 seconds = 617.80 MB/sec</span><br></pre></td></tr></table></figure>

<p>自动检测新的硬盘</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;- - -&#x27;</span> &gt; /sys/class/scsi_host/hostx/scan</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> /sys/class/scsi_host/host*/scan;<span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&#x27;- - -&#x27;</span> &gt; <span class="variable">$i</span>;<span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>ubuntu 自动检测新的硬盘</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#两种写法</span></span><br><span class="line">1 循环遍历</span><br><span class="line">[root@ubuntu2204 ~]# <span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">ls</span> /sys/class/scsi_host/`;<span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">&#x27;- - -&#x27;</span> &gt;/sys/class/scsi_host/<span class="variable">$i</span>/scan;<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">2 找出SPI总线对应的 host，只扫描该 host</span><br><span class="line">[root@ubuntu2204 ~]# grep mptspi /sys/class/scsi_host/host*/proc_name/sys/class/scsi_host/host32/proc_name:mptspi</span><br><span class="line"></span><br><span class="line">[root@ubuntu2204 ~]# <span class="built_in">echo</span> <span class="string">&#x27;- - -&#x27;</span> &gt; /sys/class/scsi_host/host32/scan</span><br><span class="line"></span><br><span class="line"><span class="comment">#此处是重新扫描 SCSI 总线来添加设备，之所以是 SCSI 总线，是因为我们添加的 SCSI 类型的硬盘</span></span><br></pre></td></tr></table></figure>

<h1 id="2-磁盘分区"><a href="#2-磁盘分区" class="headerlink" title="2 磁盘分区"></a>2 磁盘分区</h1><h2 id="2-1-为什么分区"><a href="#2-1-为什么分区" class="headerlink" title="2.1 为什么分区"></a>2.1 为什么分区</h2><ul>
<li>优化I&#x2F;O性能</li>
<li>实现磁盘空间配额限制</li>
<li>提高修复速度</li>
<li>隔离系统和程序</li>
<li>安装多个OS</li>
<li>采用不同文件系统</li>
</ul>
<h2 id="2-2-分区类型"><a href="#2-2-分区类型" class="headerlink" title="2.2 分区类型"></a>2.2 分区类型</h2><p>分区主要分为三类：主分区&lt;— 扩展分区&lt;— 逻辑分区</p>
<ul>
<li>逻辑分区属于扩展分区，扩展分区属于主分区</li>
<li>主分区又叫做引导分区，是可以安装系统的分区</li>
</ul>
<p><img src="/Linux/disk-manage/disk-partition/1750928122241-ccd1a45d-b3d7-460e-b80c-39a95f6625ff-17556818443271.jpeg" alt="img"></p>
<h2 id="2-3-分区格式"><a href="#2-3-分区格式" class="headerlink" title="2.3 分区格式"></a>2.3 分区格式</h2><h3 id="2-3-1-MBR分区"><a href="#2-3-1-MBR分区" class="headerlink" title="2.3.1 MBR分区"></a>2.3.1 MBR分区</h3><p>MBR 分区，MBR 的意思是 “主引导记录”。MBR 最大支持 2TB 容量，在容量方面存在着极大的瓶颈。并且只支持创建最多4个主分区，也可以3主分区+1扩展(N个逻辑分区)。而GPT分区方式就没有这些限制</p>
<p>划分分区的单位：</p>
<ul>
<li>CentOS 5 之前按整柱面划分</li>
<li>CentOS 6 版本后可以按Sector划分</li>
</ul>
<p>0磁道0扇区：512bytes</p>
<ul>
<li>446字节存放计算机启动的程序</li>
<li>64字节存放划分分区的信息，每个分区占16字节</li>
<li>2字节 55AA 标识位</li>
</ul>
<p><img src="/Linux/disk-manage/disk-partition/1753768603051-f8a7a790-2104-4713-96ff-870a4f38f478-17556818443274.png" alt="null"></p>
<p><strong>硬盘主引导记录MBR由4个部分组成</strong></p>
<ul>
<li>主引导程序（偏移地址0000H–0088H），它负责从活动分区中装载，并运行系统引导程序</li>
<li>出错信息数据区，偏移地址0089H–00E1H为出错信息，00E2H–01BDH全为0字节</li>
<li>分区表（DPT,Disk Partition Table）含4个分区项，偏移地址01BEH–01FDH,每个分区表项长16个字节，共64字节为分区项1、分区项2、分区项3、分区项4</li>
<li>结束标志字，偏移地址01FE–01FF的2个字节值为结束标志55AA</li>
</ul>
<p><strong>为什么不能超过4个主分区？</strong></p>
<ul>
<li>因为在0磁道0扇区上只留了64bytes空间存储分区表信息，而一个分区的关键信息要占用16个字节来存放</li>
</ul>
<p><strong>为什么单分区不能超2T？</strong></p>
<ul>
<li>一个分区信息占用16个字节，其中记录分区开始位置的空间为4个字节，记录分区结束位置的空间也是4个字节；</li>
<li>一个字节8位，4个字节是32位，则起始位最小值为32个0，结束位最大值为32个1，</li>
<li>所以一个分区，最大就是2的32次方个扇区，一个扇区512字节，则最大空间是 232*29 &#x3D; 241 字节；</li>
<li>240是T，那么241表示不超过2T</li>
</ul>
<p>范例：二进制查看扇区情况</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexdump -C -n 512 /dev/sda</span><br></pre></td></tr></table></figure>

<p>范例：备份MBR的分区表,并破坏后恢复</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#备份MBR分区表</span></span><br><span class="line">[root@centos8 ~]#<span class="built_in">dd</span> <span class="keyword">if</span>=/dev/sda of=/data/dpt.img bs=1 count=64 skip=446</span><br><span class="line">bs=1：块大小1个字节  count=64：备份64字节  skip=446：不要前面446字节，取后面的64字节</span><br><span class="line">/dev/sda：使用lsblk查看当前虚拟机的硬盘名称</span><br><span class="line">/data/dpt.img：备份到的文件</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#hexdump -C /data/dpt.img</span><br><span class="line">[root@centos8 ~]#scp /data/dpt.img 10.0.0.102:</span><br><span class="line"></span><br><span class="line"><span class="comment">#破坏MBR分区表</span></span><br><span class="line">[root@centos8 ~]#<span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/dev/sda bs=1 count=64 seek=446</span><br><span class="line"></span><br><span class="line"><span class="comment">#无法启动</span></span><br><span class="line">[root@centos8 ~]#reboot</span><br><span class="line"></span><br><span class="line"><span class="comment">#进入虚拟机，手速要快按下ESC键进入一个选择界面，选择CD-ROM Drive,进入Linux安装光盘界面，选择Troubleshooting，选择第2项rescue，选第1项continue，回车继续，配置网络，将之前备份到远程主机的文件拷贝过来</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置网络</span></span><br><span class="line">ifconfig ens160 10.0.0.8/24</span><br><span class="line">ip a a 10.0.0.8/24 dev ens160</span><br><span class="line"></span><br><span class="line"><span class="comment">#传送文件</span></span><br><span class="line">scp 10.0.0.102:/root/dpt.img .</span><br><span class="line"></span><br><span class="line"><span class="comment">#恢复MBR分区表</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=dpt.img of=/dev/sda bs=1 count=64 seek=446</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<p>问题：如何利用分区策略相同的另一台主机的分区表来还原和恢复当前主机破环的分区表？</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在正常主机上备份分区表，使用 sfdisk 导出分区表</span></span><br><span class="line"><span class="built_in">sudo</span> sfdisk -d /dev/sdX &gt; partition_table.sfdisk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将分区表传输到目标主机</span></span><br><span class="line">scp partition_table.sfdisk user@target_host:/path/to/destination/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在目标主机上恢复分区表</span></span><br><span class="line"><span class="built_in">sudo</span> sfdisk --verify /dev/sdX &lt; partition_table.sfdisk</span><br><span class="line"><span class="built_in">sudo</span> sfdisk /dev/sdX &lt; partition_table.sfdisk</span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-GPT分区"><a href="#2-3-2-GPT分区" class="headerlink" title="2.3.2 GPT分区"></a>2.3.2 GPT分区</h3><p>GPT 分区（ubuntu装系统默认就是GPT分区），GPT 意为 GUID 分区表，它支持的磁盘容量比 MBR 大得多。这是一个正逐渐取代 MBR 的新标准，它是由 UEFI 辅住而形成的，将来 UEFI 用于取代老旧的 BIOS，而 GPT 则取代老旧的 MBR。</p>
<ul>
<li>GPT：GUID（Globals Unique Identifiers） partition table 支持128个分区，当数据较大时可以使用GPT分区，使用64位，支持8Z（ 512Byte&#x2F;block ）64Z （ 4096Byte&#x2F;block）</li>
<li>使用128位UUID(Universally Unique Identifier) 表示磁盘和分区，GPT分区表自动备份在头和尾两份， 并有CRC校验位，自动备份</li>
<li>UEFI (Unified Extensible Firmware Interface 统一可扩展固件接口)硬件支持GPT，使得操作系统可以启动</li>
</ul>
<h2 id="2-4-管理分区"><a href="#2-4-管理分区" class="headerlink" title="2.4 管理分区"></a>2.4 管理分区</h2><h3 id="2-4-1-parted-命令"><a href="#2-4-1-parted-命令" class="headerlink" title="2.4.1 parted 命令"></a>2.4.1 parted 命令</h3><p>高级分区操作，可以是交互或非交互方式</p>
<p>注意：parted的操作都是实时生效的，小心使用</p>
<p>格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">parted [选项]... [设备 [命令 [参数]...]...]</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-l|--list 	<span class="comment">#显示所有硬盘分区信息    </span></span><br><span class="line">-s|--script <span class="comment">#不输出提示信息 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#常用子命令</span></span><br><span class="line">align-check TYPE N            		 <span class="comment">#检查分区是否满足对齐(最小|最佳)类型的对齐方式</span></span><br><span class="line"><span class="built_in">help</span> [COMMAND]              		 <span class="comment">#显示命令帮助</span></span><br><span class="line">mklabel|mktable LABEL-TYPE        	 <span class="comment">#指定磁盘的分区类型 gpt|msdos(mbr)</span></span><br><span class="line">mkpart PART-TYPE [FS-TYPE] START END <span class="comment">#新建分区,指定分区类型，文件系统，开始结束位置</span></span><br><span class="line">name NUMBER NAME             		 <span class="comment">#重命名指定分区</span></span><br><span class="line"><span class="built_in">print</span> [devices|free|list,all|NUMBER] <span class="comment">#显示</span></span><br><span class="line">quit                   				 <span class="comment">#退出</span></span><br><span class="line">rescue START END             		 <span class="comment">#空间碎片整理</span></span><br><span class="line">resizepart NUMBER END          		 <span class="comment">#重置分区大小</span></span><br><span class="line"><span class="built_in">rm</span> NUMBER                			 <span class="comment">#删除指定分区</span></span><br><span class="line"><span class="keyword">select</span> DEVICE              			 <span class="comment">#选择设备</span></span><br><span class="line">disk_set FLAG STATE           		 <span class="comment">#为设备打标签</span></span><br><span class="line">disk_toggle [FLAG]           		 <span class="comment">#修改flag</span></span><br><span class="line"><span class="built_in">set</span> NUMBER FLAG STATE          		 <span class="comment">#设置flag</span></span><br><span class="line">toggle [NUMBER [FLAG]]          	 <span class="comment">#修改flag</span></span><br><span class="line">unit UNIT                			 <span class="comment">#设置默认单位, 默认为MB，B|KB|MB|GB|TB</span></span><br><span class="line">version                 			 <span class="comment">#显示版本</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">parted /dev/sdb mklabel gpt|msdos				<span class="comment">#选择使用GPT还是MBR分区</span></span><br><span class="line">parted /dev/sdb <span class="built_in">print</span>						   	<span class="comment">#打印分区表情况</span></span><br><span class="line">parted /dev/sdb mkpart primary 1 200（默认M）	 <span class="comment">#指定从第一个分区到第200个分区进行创建主分区</span></span><br><span class="line">parted /dev/sdb <span class="built_in">rm</span> 1							<span class="comment">#删除分区（1是硬盘编号）</span></span><br><span class="line">parted -l  										<span class="comment">#列出所有硬盘分区信息</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#parted /dev/sdb <span class="built_in">print</span></span><br><span class="line">Error: /dev/sdb: unrecognised disk label</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)                  </span><br><span class="line">Disk /dev/sdb: 21.5GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: unknown</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb mklabel gpt</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb <span class="built_in">print</span></span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 21.5GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags:</span><br><span class="line">Number Start End Size File system Name Flags</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb mkpart primary 1 1001</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb <span class="built_in">print</span></span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 21.5GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags:</span><br><span class="line">Number Start  End   Size  File system Name   Flags</span><br><span class="line">1   1049kB 1001MB 1000MB        primary</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb mkpart primary 1002 1102</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb <span class="built_in">print</span></span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 21.5GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags:</span><br><span class="line">Number Start  End   Size  File system Name   Flags</span><br><span class="line">1   1049kB 1001MB 1000MB        primary</span><br><span class="line">2   1002MB 1102MB  99.6MB        primary</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb <span class="built_in">rm</span> 2</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb <span class="built_in">print</span>                  </span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 21.5GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags:</span><br><span class="line">Number Start  End   Size  File system Name   Flags</span><br><span class="line">1   1049kB 1001MB 1000MB        primary</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb mklabel msdos</span><br><span class="line">Warning: The existing disk label on /dev/sdb will be destroyed and all data on</span><br><span class="line">this disk will be lost. Do you want to <span class="built_in">continue</span>?</span><br><span class="line">Yes/No? Y</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb <span class="built_in">print</span>             </span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 21.5GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line">Number Start End Size Type File system Flags</span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#parted /dev/sdb		<span class="comment">#交互式操作</span></span><br><span class="line">GNU Parted 3.2</span><br><span class="line">Using /dev/sdb</span><br><span class="line">Welcome to GNU Parted! Type <span class="string">&#x27;help&#x27;</span> to view a list of commands.</span><br><span class="line">(parted) <span class="built_in">help</span></span><br><span class="line">align-check TYPE N            check partition N <span class="keyword">for</span> TYPE(min|opt)</span><br><span class="line">alignment</span><br><span class="line"><span class="built_in">help</span> [COMMAND]              <span class="built_in">print</span> general <span class="built_in">help</span>, or <span class="built_in">help</span> on</span><br><span class="line">COMMAND</span><br><span class="line">mklabel,mktable LABEL-TYPE        create a new disklabel (partition</span><br><span class="line">table)</span><br><span class="line">mkpart PART-TYPE [FS-TYPE] START END   make a partition</span><br><span class="line">name NUMBER NAME             name partition NUMBER as NAME</span><br><span class="line"><span class="built_in">print</span> [devices|free|list,all|NUMBER]   display the partition table,</span><br><span class="line">available devices, free space, all found partitions, or a particular partition</span><br><span class="line">quit                   <span class="built_in">exit</span> program</span><br><span class="line">rescue START END             rescue a lost partition near START</span><br><span class="line">and END</span><br><span class="line">resizepart NUMBER END          resize partition NUMBER</span><br><span class="line"> <span class="built_in">rm</span> NUMBER                delete partition NUMBER</span><br><span class="line"><span class="keyword">select</span> DEVICE              choose the device to edit</span><br><span class="line">disk_set FLAG STATE           change the FLAG on selected device</span><br><span class="line">disk_toggle [FLAG]            toggle the state of FLAG on selected</span><br><span class="line">device</span><br><span class="line"> <span class="built_in">set</span> NUMBER FLAG STATE          change the FLAG on partition NUMBER</span><br><span class="line">toggle [NUMBER [FLAG]]          toggle the state of FLAG on partition</span><br><span class="line">NUMBER</span><br><span class="line">unit UNIT                 <span class="built_in">set</span> the default unit to UNIT</span><br><span class="line">version                 display the version number and</span><br><span class="line">copyright information of GNU Parted</span><br><span class="line">(parted)</span><br></pre></td></tr></table></figure>

<h3 id="2-4-2-分区工具fdisk和gdisk"><a href="#2-4-2-分区工具fdisk和gdisk" class="headerlink" title="2.4.2 分区工具fdisk和gdisk"></a>2.4.2 分区工具fdisk和gdisk</h3><p>格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l [-u] [device...]    <span class="comment">#查看分区</span></span><br><span class="line">fdisk [device...]       	 <span class="comment">#管理MBR分区</span></span><br><span class="line">gdisk [device...]       	 <span class="comment">#类fdisk 的管理GPT分区工具</span></span><br></pre></td></tr></table></figure>

<p>选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-b|--sector-size &lt;size&gt; <span class="comment">#指定扇区大小，默认512字节</span></span><br><span class="line">-L|--color[=color]      <span class="comment">#显示时是否添加颜色(auto|always|never)默认启用颜色</span></span><br><span class="line">-l|--list 				<span class="comment">#显示</span></span><br><span class="line">-o|--output &lt;list&gt; 		<span class="comment">#只显示指定列</span></span><br><span class="line">-u|--units[=&lt;unit&gt;]     <span class="comment">#设置显示单位 cylinders|sectors，默认sectors</span></span><br><span class="line">-s|--getsz 				<span class="comment">#显示设备有多少个扇区</span></span><br><span class="line">-b|--bytes N          	<span class="comment">#以指定的字节大小来计算扇区数量</span></span><br><span class="line">-t|--<span class="built_in">type</span> <span class="built_in">type</span>       	<span class="comment">#只显示指定类型的分区表</span></span><br><span class="line">-C|--cylinders N    	<span class="comment">#指定柱面数</span></span><br><span class="line">-H|--heads N      		<span class="comment">#指定磁头数</span></span><br><span class="line">-S|--sectors N     		<span class="comment">#指定每条磁道的扇区数</span></span><br></pre></td></tr></table></figure>

<p>子命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">fdisk</span><br><span class="line">p <span class="comment">#分区列表</span></span><br><span class="line">t <span class="comment">#更改分区类型</span></span><br><span class="line">n <span class="comment">#创建新分区</span></span><br><span class="line">d <span class="comment">#删除分区</span></span><br><span class="line">v <span class="comment">#校验分区</span></span><br><span class="line">u <span class="comment">#转换单位</span></span><br><span class="line">w <span class="comment">#保存并退出</span></span><br><span class="line">q <span class="comment">#不保存并退出</span></span><br><span class="line">x <span class="comment">#高级功能(专家模式)</span></span><br><span class="line"></span><br><span class="line">gdisk</span><br><span class="line">b <span class="comment">#备份分区表到指定文件</span></span><br><span class="line">c <span class="comment">#修改分区名</span></span><br><span class="line">d <span class="comment">#删除分区</span></span><br><span class="line">i <span class="comment">#显示分区详细信息</span></span><br><span class="line">l <span class="comment">#列出所有分区类型</span></span><br><span class="line">n <span class="comment">#新建分区</span></span><br><span class="line">o <span class="comment">#创建新的分区表</span></span><br><span class="line">p <span class="comment">#查看分区</span></span><br><span class="line">q <span class="comment">#退出</span></span><br><span class="line">r <span class="comment">#恢复和转换选项，非专业人士勿用</span></span><br><span class="line">s <span class="comment">#排序</span></span><br><span class="line">t <span class="comment">#修改分区类型，默认 8300,表示普通分区</span></span><br><span class="line">v <span class="comment">#检测硬盘是否有问题</span></span><br><span class="line">w <span class="comment">#保存退出</span></span><br><span class="line">x <span class="comment">#额外功能，专家模式</span></span><br></pre></td></tr></table></figure>

<p>CentOS 7,8 同步分区表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">partprobe</span><br></pre></td></tr></table></figure>

<p>CentOS6 通知内核重新读取硬盘分区表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#新增分区用</span></span><br><span class="line">partx -a /dev/DEVICE</span><br><span class="line">kpartx -a /dev/DEVICE -f: force</span><br><span class="line"><span class="comment">#示例：</span></span><br><span class="line">[root@centos6 ~]#partx -a /dev/sda</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除分区用</span></span><br><span class="line">partx -d --nr M-N /dev/DEVICE		<span class="comment">#M，N表示分区数</span></span><br><span class="line"><span class="comment">#示例：</span></span><br><span class="line">[root@centos6 ~]#partx -d --nr 6-8 /dev/sda</span><br><span class="line"></span><br><span class="line"><span class="comment">#同步分区表</span></span><br><span class="line">[root@centos6 ~]#partx -a /dev/sda</span><br></pre></td></tr></table></figure>

<p>范例:非交互式创建分区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&#x27;n\np\n\n\n+2G\nw\n&#x27;</span> | fdisk /dev/sdc</span><br></pre></td></tr></table></figure>

<p>范例: 批量创建分区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#<span class="built_in">echo</span> -e <span class="string">&#x27;n\np\n\n\n+1G\nw&#x27;</span> | fdisk /dev/sdb</span><br><span class="line">[root@centos8 ~]#fdisk /dev/sdb &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">n</span></span><br><span class="line"><span class="string">p</span></span><br><span class="line"><span class="string">+1G</span></span><br><span class="line"><span class="string">w</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#显示指定列</span></span><br><span class="line">fdisk -lo <span class="built_in">id</span>,size,<span class="built_in">type</span> /dev/sda</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看内核是否已经识别新的分区</span></span><br><span class="line"><span class="built_in">cat</span> /proc/partitions</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]#fdisk /dev/sdb</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain <span class="keyword">in</span> memory only, <span class="keyword">until</span> you decide to write them.</span><br><span class="line">Be careful before using the write <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x057e0640.</span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n	<span class="comment">#输入子命令</span></span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)		<span class="comment">#选择主分区</span></span><br><span class="line">   e   extended										<span class="comment">#选择扩展分区</span></span><br><span class="line">Select (default p): </span><br><span class="line">Partition number (1-4, default 1): 					<span class="comment">#选择分区编号</span></span><br><span class="line">First sector (2048-41943039, default 2048): 		<span class="comment">#选择开始扇区位置，2048表示起始位置是2M</span></span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-41943039, default 41943039): 	<span class="comment">#选择大小</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): w								<span class="comment">#w保存</span></span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure>

<p>范例：硬盘分区问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#看出磁盘的第二个分区的起始位置为1026048，计算：1026048*512=525M（因为512个字节一个扇区），结束位置为1599M，1599-525=1074，相当于分了1G空间</span></span><br><span class="line">[root@centos7 ~]#fdisk -l /dev/sdb</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 21.5 GB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label <span class="built_in">type</span>: dos</span><br><span class="line">Disk identifier: 0x166a0e04</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb2         1026048     3123199     1048576   83  Linux</span><br><span class="line"></span><br><span class="line"><span class="comment">#现在想要在第一个分区分5G的容量</span></span><br><span class="line">[root@centos7 ~]#fdisk /dev/sdb</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain <span class="keyword">in</span> memory only, <span class="keyword">until</span> you decide to write them.</span><br><span class="line">Be careful before using the write <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): n</span><br><span class="line">Partition <span class="built_in">type</span>:</span><br><span class="line">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1,3,4, default 1): 1</span><br><span class="line">First sector (2048-41943039, default 2048): </span><br><span class="line">Using default value 2048</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-1026047, default 1026047): +5G</span><br><span class="line">Value out of range.		<span class="comment">#失败了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#失败的原因是在一个磁盘空间里，之间在525M到1599M的区间分了一个分区，在第一个分区分的起始位置只能是2048(2M)，而2M到525M的区间不足5G，因为分区必须是连续空间，不能是东凑一块西凑一块，要分5G空间就只能是在起始位置1599(3123199)开始分第三个分区</span></span><br></pre></td></tr></table></figure>

<p>范例：修改分区类型</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]#fdisk -l /dev/sdb</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 21.5 GB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label <span class="built_in">type</span>: dos</span><br><span class="line">Disk identifier: 0x166a0e04</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048     1026047      512000   83  Linux		<span class="comment">#现在是83</span></span><br><span class="line">/dev/sdb2         1026048     3123199     1048576   83  Linux		</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]#fdisk /dev/sdb</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain <span class="keyword">in</span> memory only, <span class="keyword">until</span> you decide to write them.</span><br><span class="line">Be careful before using the write <span class="built_in">command</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>): t					<span class="comment">#更改分区类型</span></span><br><span class="line">Partition number (1,2, default 2): 1	<span class="comment">#选择分区编号</span></span><br><span class="line">Hex code (<span class="built_in">type</span> L to list all codes): L	<span class="comment">#列出所有分区类型</span></span><br><span class="line"></span><br><span class="line"> 0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris        </span><br><span class="line"> 1  FAT12           27  Hidden NTFS Win 82  Linux swap / So c1  DRDOS/sec (FAT-</span><br><span class="line"> 2  XENIX root      39  Plan 9          83  Linux           c4  DRDOS/sec (FAT-</span><br><span class="line"> 3  XENIX usr       3c  PartitionMagic  84  OS/2 hidden C:  c6  DRDOS/sec (FAT-</span><br><span class="line"> 4  FAT16 &lt;32M      40  Venix 80286     85  Linux extended  c7  Syrinx         </span><br><span class="line"> 5  Extended        41  PPC PReP Boot   86  NTFS volume <span class="built_in">set</span> da  Non-FS data    </span><br><span class="line"> 6  FAT16           42  SFS             87  NTFS volume <span class="built_in">set</span> db  CP/M / CTOS / .</span><br><span class="line"> 7  HPFS/NTFS/exFAT 4d  QNX4.x          88  Linux plaintext de  Dell Utility   </span><br><span class="line"> 8  AIX             4e  QNX4.x 2nd part 8e  Linux LVM       <span class="built_in">df</span>  BootIt         </span><br><span class="line"> 9  AIX bootable    4f  QNX4.x 3rd part 93  Amoeba          e1  DOS access     </span><br><span class="line"> a  OS/2 Boot Manag 50  OnTrack DM      94  Amoeba BBT      e3  DOS R/O        </span><br><span class="line"> b  W95 FAT32       51  OnTrack DM6 Aux 9f  BSD/OS          e4  SpeedStor      </span><br><span class="line"> c  W95 FAT32 (LBA) 52  CP/M            a0  IBM Thinkpad hi eb  BeOS fs        </span><br><span class="line"> e  W95 FAT16 (LBA) 53  OnTrack DM6 Aux a5  FreeBSD         ee  GPT            </span><br><span class="line"> f  W95 Ext<span class="string">&#x27;d (LBA) 54  OnTrackDM6      a6  OpenBSD         ef  EFI (FAT-12/16/</span></span><br><span class="line"><span class="string">10  OPUS            55  EZ-Drive        a7  NeXTSTEP        f0  Linux/PA-RISC b</span></span><br><span class="line"><span class="string">11  Hidden FAT12    56  Golden Bow      a8  Darwin UFS      f1  SpeedStor      </span></span><br><span class="line"><span class="string">12  Compaq diagnost 5c  Priam Edisk     a9  NetBSD          f4  SpeedStor      </span></span><br><span class="line"><span class="string">14  Hidden FAT16 &lt;3 61  SpeedStor       ab  Darwin boot     f2  DOS secondary  </span></span><br><span class="line"><span class="string">16  Hidden FAT16    63  GNU HURD or Sys af  HFS / HFS+      fb  VMware VMFS    </span></span><br><span class="line"><span class="string">17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE </span></span><br><span class="line"><span class="string">18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto</span></span><br><span class="line"><span class="string">1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep        </span></span><br><span class="line"><span class="string">1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT            </span></span><br><span class="line"><span class="string">1e  Hidden W95 FAT1 80  Old Minix      </span></span><br><span class="line"><span class="string">Hex code (type L to list all codes): 8e			#选择分区类型编号</span></span><br><span class="line"><span class="string">Changed type of partition &#x27;</span>Linux<span class="string">&#x27; to &#x27;</span>Linux LVM<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Command (m for help): w</span></span><br><span class="line"><span class="string">The partition table has been altered!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Calling ioctl() to re-read partition table.</span></span><br><span class="line"><span class="string">Syncing disks.</span></span><br><span class="line"><span class="string">[root@centos7 ~]#fdisk -l /dev/sdb</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Disk /dev/sdb: 21.5 GB, 21474836480 bytes, 41943040 sectors</span></span><br><span class="line"><span class="string">Units = sectors of 1 * 512 = 512 bytes</span></span><br><span class="line"><span class="string">Sector size (logical/physical): 512 bytes / 512 bytes</span></span><br><span class="line"><span class="string">I/O size (minimum/optimal): 512 bytes / 512 bytes</span></span><br><span class="line"><span class="string">Disk label type: dos</span></span><br><span class="line"><span class="string">Disk identifier: 0x166a0e04</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Device Boot      Start         End      Blocks   Id  System</span></span><br><span class="line"><span class="string">/dev/sdb1            2048     1026047      512000   8e  Linux LVM	#改成8e（逻辑卷）</span></span><br><span class="line"><span class="string">/dev/sdb2         1026048     3123199     1048576   83  Linux</span></span><br></pre></td></tr></table></figure>

<p>学习问题：就是这个sda2挂载了&#x2F;boot，sda3那个lvm挂载了&#x2F;，疑问就是&#x2F;boot所占的空间，会影响到&#x2F;的空间吗，因为boot也是在&#x2F;下的</p>
<p>解答：&#x2F;boot是单独分出来的sda2，跟sda3没关系，不会互相影响。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu2004 ~]#<span class="built_in">df</span> -h</span><br><span class="line">Filesystem                         Size  Used Avail Use% Mounted on</span><br><span class="line">udev                               1.9G     0  1.9G   0% /dev</span><br><span class="line">tmpfs                              389M  1.6M  388M   1% /run</span><br><span class="line">/dev/mapper/ubuntu--vg-ubuntu--lv   18G  2.8G   15G  17% /</span><br><span class="line">tmpfs                              1.9G  4.0K  1.9G   1% /dev/shm</span><br><span class="line">tmpfs                              5.0M     0  5.0M   0% /run/lock</span><br><span class="line">tmpfs                              1.9G     0  1.9G   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda2                          1.5G  209M  1.2G  16% /boot</span><br><span class="line">tmpfs                              389M     0  389M   0% /run/user/0</span><br></pre></td></tr></table></figure>

<h3 id="2-4-3-lsblk"><a href="#2-4-3-lsblk" class="headerlink" title="2.4.3 lsblk"></a>2.4.3 lsblk</h3><p>格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-a|--all      		<span class="comment">#输出所有设备信息</span></span><br><span class="line">-b|--bytes     		<span class="comment">#以字节为单位显示设备大小</span></span><br><span class="line">-d|--nodeps     	<span class="comment">#不显示分区信息</span></span><br><span class="line">-e|--exclude &lt;list&gt; <span class="comment">#以主设备号排除设备</span></span><br><span class="line">-f|--fs       		<span class="comment">#显示文件系统</span></span><br><span class="line">-i|--ascii     		<span class="comment">#只使用 ascii 字符输出</span></span><br><span class="line">-I|--include &lt;list&gt; <span class="comment">#仅显示指定的设备</span></span><br><span class="line">-J|--json      		<span class="comment">#以json格式显示输出</span></span><br><span class="line">-l|--list     		<span class="comment">#以列表显示</span></span><br><span class="line">-T|--tree      		<span class="comment">#以树状结构显示，默认项</span></span><br><span class="line">-m|--perms     		<span class="comment">#显示属主属组及权限</span></span><br><span class="line">-n|--noheadings   	<span class="comment">#不显示表头</span></span><br><span class="line">-o|--output &lt;list&gt; 	<span class="comment">#只显示指定列</span></span><br><span class="line">-O|--output-all   	<span class="comment">#显示所有列</span></span><br><span class="line">-p|--paths     		<span class="comment">#显示设备全路径</span></span><br><span class="line">-P|--pairs     		<span class="comment">#以 k=&gt;v 的格式显示输出</span></span><br><span class="line">-r|--raw      		<span class="comment">#原样输出</span></span><br><span class="line">-s|--inverse    	<span class="comment">#反向显示关联信息</span></span><br><span class="line">-S|--scsi      		<span class="comment">#显示scsi设备(small computer system interface device,小型计算机接口设备)</span></span><br><span class="line">-t|--topology    	<span class="comment">#显示拓扑信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-o常用字段</span></span><br><span class="line">NAME 		<span class="comment">#设备名称</span></span><br><span class="line">MAJ:MIN 	<span class="comment">#主设备号:次设备号</span></span><br><span class="line">RM 			<span class="comment">#是否是可移动设备</span></span><br><span class="line">SIZE 		<span class="comment">#设备容量大小</span></span><br><span class="line">RO 			<span class="comment">#是否是只读设备</span></span><br><span class="line">TYPE 		<span class="comment">#设备类型</span></span><br><span class="line">MOUNTPOINT 	<span class="comment">#挂载点</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看指定设备</span></span><br><span class="line">[root@ubuntu2204 ~]# lsblk -f /dev/sdc</span><br><span class="line"><span class="comment">#查看所有设备</span></span><br><span class="line">[root@rocky86 ~]# lsblk -f</span><br><span class="line"><span class="comment">#查看指定列</span></span><br><span class="line">[root@ubuntu2004 ~]#lsblk -d -o NAME,SIZE</span><br></pre></td></tr></table></figure>

<h3 id="2-4-4-blkid"><a href="#2-4-4-blkid" class="headerlink" title="2.4.4 blkid"></a>2.4.4 blkid</h3><p>可以查看块设备属性信息</p>
<p>格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">blkid [OPTION]... [DEVICE]</span><br><span class="line"></span><br><span class="line">-U UUID 	<span class="comment">#根据指定的UUID来查找对应的设备</span></span><br><span class="line">-L LABEL	<span class="comment">#根据指定的LABEL来查找对应的设备</span></span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#显示所有</span></span><br><span class="line">[root@ubuntu2004 ~]#blkid</span><br><span class="line">/dev/sr0: UUID=<span class="string">&quot;2022-02-23-09-27-00-00&quot;</span> LABEL=<span class="string">&quot;Ubuntu-Server 20.04.4 LTS amd64&quot;</span> TYPE=<span class="string">&quot;iso9660&quot;</span> PTUUID=<span class="string">&quot;492bdcc4&quot;</span> PTTYPE=<span class="string">&quot;dos&quot;</span></span><br><span class="line">/dev/sda2: UUID=<span class="string">&quot;04c587f7-1f97-4632-970a-0dd3e08fb398&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;118bc546-3a2d-4411-9c74-25f5a37bdbf3&quot;</span></span><br><span class="line">/dev/sda3: UUID=<span class="string">&quot;8LrQLS-6cfS-HTCn-w7Vo-flx7-90dy-qDukq7&quot;</span> TYPE=<span class="string">&quot;LVM2_member&quot;</span> PARTUUID=<span class="string">&quot;b07f78ba-02aa-4575-ae26-7c97b4a43b73&quot;</span></span><br><span class="line">/dev/mapper/ubuntu--vg-ubuntu--lv: UUID=<span class="string">&quot;8ef803b3-d204-4c23-b2e7-1a5ba91ea557&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span></span><br><span class="line">/dev/loop1: TYPE=<span class="string">&quot;squashfs&quot;</span></span><br><span class="line">/dev/loop2: TYPE=<span class="string">&quot;squashfs&quot;</span></span><br><span class="line">/dev/loop3: TYPE=<span class="string">&quot;squashfs&quot;</span></span><br><span class="line">/dev/loop4: TYPE=<span class="string">&quot;squashfs&quot;</span></span><br><span class="line">/dev/loop5: TYPE=<span class="string">&quot;squashfs&quot;</span></span><br><span class="line">/dev/loop6: TYPE=<span class="string">&quot;squashfs&quot;</span></span><br><span class="line">/dev/sda1: PARTUUID=<span class="string">&quot;b96ee049-d3f9-49d0-a7dd-10cdd163f152&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查询</span></span><br><span class="line">[root@ubuntu2004 ~]#blkid -U <span class="string">&quot;04c587f7-1f97-4632-970a-0dd3e08fb398&quot;</span></span><br><span class="line">/dev/sda2</span><br></pre></td></tr></table></figure>

<p>PARTUUID是分区的唯一标识符，而UUID是文件系统的唯一标识符。以下是它们的具体解释：</p>
<ul>
<li>PARTUUID（Partition UUID）：是针对GPT（GUID Partition Table）分区方案的分区表级别的唯一标识符。它是在创建分区时生成的，并且即使对分区进行重新格式化或更改文件系统类型，该标识符仍然保持不变。因为PARTUUID是从分区表中直接检索得到的，所以它可以访问分区而不依赖于分区内的文件系统内容。</li>
<li>UUID（Universally Unique Identifier）：通常是指文件系统级别的唯一标识符。它用于唯一识别一个特定的文件系统实例，比如一个ext4或NTFS分区。当文件系统被创建（例如，通过格式化操作）时，会生成一个UUID，并存储在文件系统的元数据中。如果文件系统被删除或重新格式化，UUID会改变。</li>
</ul>
<p>简而言之，PARTUUID与分区结构相关联，而UUID与分区内的文件系统相关联。</p>
<h3 id="2-4-5-findfs"><a href="#2-4-5-findfs" class="headerlink" title="2.4.5 findfs"></a>2.4.5 findfs</h3><p>查找分区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">findfs [options] LABEL=&lt;label&gt;</span><br><span class="line">findfs [options] UUID=&lt;uuid&gt;</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#findfs UUID=f7f53add-b184-4ddc-8d2c-5263b84d1e15</span><br><span class="line">/dev/sda2</span><br><span class="line">[root@ubuntu2204 ~]# findfs LABEL=<span class="string">&#x27;Ubuntu-Server 22.04 LTS amd64&#x27;</span></span><br><span class="line">/dev/sr0</span><br><span class="line">[root@centos8 ~]#findfs `sed -En <span class="string">&#x27;/data/s#^([^ ]+).*#\1#p&#x27;</span> /etc/fstab`</span><br><span class="line">/dev/sda3</span><br></pre></td></tr></table></figure>

<h2 id="2-5-Swap分区"><a href="#2-5-Swap分区" class="headerlink" title="2.5 Swap分区"></a>2.5 Swap分区</h2><h3 id="2-5-1-配置swap分区"><a href="#2-5-1-配置swap分区" class="headerlink" title="2.5.1 配置swap分区"></a>2.5.1 配置swap分区</h3><p>注意：为优化性能，可以将swap 分布存放，或高性能磁盘存放</p>
<p><a target="_blank" rel="noopener" href="https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/installation_guide/sect-disk-partitioning-setup-ppc#sect-recommended-partitioning-scheme-ppc">Redhat 官方推荐推荐系统 swap 空间</a></p>
<table>
<thead>
<tr>
<th>系统中的 RAM 量</th>
<th>推荐的 swap 空间</th>
<th>允许休眠的建议 swap 空间大小</th>
</tr>
</thead>
<tbody><tr>
<td>低于 2 GB</td>
<td>RAM 量的2倍数</td>
<td>RAM 容量的三倍</td>
</tr>
<tr>
<td>2 GB - 8 GB</td>
<td>等于 RAM 量</td>
<td>RAM 量的倍数</td>
</tr>
<tr>
<td>8 GB - 64 GB</td>
<td>4 GB 到 RAM 容量的 0.5 倍</td>
<td>RAM 容量的 1.5 倍</td>
</tr>
<tr>
<td>8 GB - 64 GB</td>
<td>独立负载（至少 4GB）</td>
<td>不建议使用休眠功能</td>
</tr>
</tbody></table>
<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu2204 ~]# free -h</span><br><span class="line">           total    used    free   shared    buff/cache  available</span><br><span class="line">Mem:       1.9Gi    347Mi   896Mi   1.0Mi    697Mi       1.4Gi</span><br><span class="line">Swap:      2.0Gi     0B     2.0Gi</span><br><span class="line"></span><br><span class="line"><span class="comment">#Mem和Swap加起来都没有30G，所以失败了</span></span><br><span class="line">[root@ubuntu2204 ~]# <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/dev/null bs=30G count=1</span><br><span class="line"><span class="built_in">dd</span>: memory exhausted by input buffer of size 32212254720 bytes (30 GiB)</span><br><span class="line"></span><br><span class="line"><span class="comment">#这里文件大小虽然超过了，但有SWAP空间，所以可以执行成功</span></span><br><span class="line">[root@ubuntu2204 ~]# <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/dev/null bs=3G count=1</span><br><span class="line">0+1 records <span class="keyword">in</span></span><br><span class="line">0+1 records out</span><br><span class="line">2147479552 bytes (2.1 GB, 2.0 GiB) copied, 7.40064 s, 290 MB/s</span><br></pre></td></tr></table></figure>

<p><strong>查询swap内存有哪些程序在使用：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">cd</span> /proc;<span class="built_in">ls</span> | grep <span class="string">&quot;^[0-9]&quot;</span> | awk <span class="string">&#x27;$0&gt;100&#x27;</span>); <span class="keyword">do</span> awk <span class="string">&#x27;/Swap:/&#123;a=a+$2&#125;END&#123;print &quot;$i&quot;,a/1024&quot;M&quot;&#125;&#x27;</span> /proc/<span class="variable">$i</span>/smaps;<span class="keyword">done</span>| <span class="built_in">sort</span> -k2nr</span><br><span class="line"></span><br><span class="line"><span class="comment">#命令解析</span></span><br><span class="line"><span class="comment">#遍历/proc目录下的所有进程目录，只考虑数字开头的目录（即进程ID）</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">cd</span> /proc;<span class="built_in">ls</span> | grep <span class="string">&quot;^[0-9]&quot;</span> | awk <span class="string">&#x27;$0&gt;100&#x27;</span>); <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#对于每个进程，读取其smaps文件，统计Swap内存的使用量（单位为KB），并将其转换为MB</span></span><br><span class="line">awk <span class="string">&#x27;/Swap:/&#123;a=a+$2&#125;END&#123;print &quot;$i&quot;,a/1024&quot;M&quot;&#125;&#x27;</span> /proc/<span class="variable">$i</span>/smaps</span><br><span class="line"></span><br><span class="line"><span class="comment">#将结果按照第二列（即Swap内存使用量）从大到小排序</span></span><br><span class="line"><span class="built_in">sort</span> -k2nr</span><br><span class="line"><span class="comment">#查看swap分区的信息</span></span><br><span class="line">swapon -s</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看占用内存最多的前10个进程</span></span><br><span class="line">ps aux --<span class="built_in">sort</span>=-%mem | <span class="built_in">head</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#筛选出使用了swap内存的进程</span></span><br><span class="line">ps aux --<span class="built_in">sort</span>=-%mem | grep -E <span class="string">&#x27;S|Z&#x27;</span> | <span class="built_in">head</span></span><br></pre></td></tr></table></figure>

<h3 id="2-5-2-交换分区实现过程"><a href="#2-5-2-交换分区实现过程" class="headerlink" title="2.5.2 交换分区实现过程"></a>2.5.2 交换分区实现过程</h3><ol>
<li>创建交换分区或者文件，然后使用mkswap写入特殊签名</li>
</ol>
<ul>
<li><p>可以使用整个磁盘，或者一个磁盘分区，使用 mkswap 命令制作swap分区</p>
<ul>
<li><code>mkswap /dev/sdb1</code></li>
</ul>
</li>
<li><p>通过文件制作，本质上还是磁盘</p>
<ul>
<li><code>dd if=/dev/zero of=/swap_file bs=1M count=200</code></li>
<li><code>chmod 0600 /swap_file</code></li>
<li><code>mkswap -f /swap_file</code></li>
</ul>
</li>
</ul>
<ol start="2">
<li><p>在&#x2F;etc&#x2F;fstab文件中添加适当的条目</p>
</li>
<li><p>激活swap分区：swapon 磁盘路径</p>
</li>
<li><p>关闭swap分区：swapoff 磁盘路径</p>
</li>
</ol>
<p><strong>启用swap分区</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">swapon [OPTION]... [DEVICE]</span><br><span class="line"></span><br><span class="line"><span class="comment">#选项</span></span><br><span class="line">-a|--all        	  <span class="comment">#激活 /etc/fstab 中的所有交换区</span></span><br><span class="line">-d|--discard[=policy] <span class="comment">#根据条件禁用(once|pages)</span></span><br><span class="line">-e|--ifexists      	  <span class="comment">#自动跳过不存在的设备而不提示</span></span><br><span class="line">-f|--fixpgsz      	  <span class="comment">#必要时重新初始化交换区</span></span><br><span class="line">-o|--options list     <span class="comment">#指定选项，swapon -o pri=1,discard=pages,nofail /dev/sda2</span></span><br><span class="line">-p|--priority N 	  <span class="comment">#指定交换设备的优先级(-1到32767)，值越大优先级越高,也可在/etc/fstab第4列指定pri=value</span></span><br><span class="line">-s|--summary      	  <span class="comment">#显示已使用交换设备的摘要</span></span><br><span class="line">--show[=columns]      <span class="comment">#以可自定义的表格形式打印摘要  swapon --show|swapon--show=NAME,TYPE</span></span><br><span class="line">--noheadings     	  <span class="comment">#不打印表头，配合 --show 选项</span></span><br><span class="line">--raw        		  <span class="comment">#使用原生输出格式，配合 --show 选项</span></span><br><span class="line">--bytes       		  <span class="comment">#在 --show 输出中以字节数显示交换区大小</span></span><br><span class="line">-v|--verbose          <span class="comment">#显示详细信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;spec&gt; 参数：</span></span><br><span class="line">-L label        <span class="comment">#同 LABEL=label</span></span><br><span class="line">-U uuid         <span class="comment">#同 UUID=uuid</span></span><br><span class="line">LABEL=label     <span class="comment">#按交换区标签指定设备</span></span><br><span class="line">UUID=uuid       <span class="comment">#按交换区 UUID 指定设备</span></span><br><span class="line">PARTLABEL=label <span class="comment">#按分区标签指定设备</span></span><br><span class="line">PARTUUID=uuid   <span class="comment">#按分区 UUID 指定设备</span></span><br><span class="line">device          <span class="comment">#要使用设备的名称</span></span><br><span class="line">filename        <span class="comment">#要使用文件的名称</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#可显示列</span></span><br><span class="line">NAME  <span class="comment">#设备文件或分区路径</span></span><br><span class="line">TYPE  <span class="comment">#设备的类型</span></span><br><span class="line">SIZE  <span class="comment">#交换区大小</span></span><br><span class="line">USED  <span class="comment">#已使用字节数</span></span><br><span class="line">PRIO  <span class="comment">#交换优先级</span></span><br><span class="line">UUID  <span class="comment">#uuid</span></span><br><span class="line">LABEL <span class="comment">#label</span></span><br></pre></td></tr></table></figure>

<p><strong>创建swap分区</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#第一种（以硬盘方式）</span></span><br><span class="line">1 给硬盘设备修改分区类型为Linux swap</span><br><span class="line">2 mkswap [device]  <span class="comment">#创建</span></span><br><span class="line">3 写入/etc/fstab文件中</span><br><span class="line">4 swapon -a <span class="comment">#使其生效</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#第二种（以文件方式）</span></span><br><span class="line">1 <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/swapfile bs=1M count=1024</span><br><span class="line">2 mkswap /swapfile</span><br><span class="line">3 <span class="built_in">chmod</span> 600 /swapfile </span><br><span class="line">4 写入/etc/fstab文件中</span><br><span class="line">5 swapon -a <span class="comment">#使其生效</span></span><br></pre></td></tr></table></figure>

<p><strong>禁用swap分区</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#第一种方法（立即生效）</span></span><br><span class="line">swapon -s 查看设备名称</span><br><span class="line">swapoff [OPTION]... [DEVICE]</span><br><span class="line"></span><br><span class="line"><span class="comment">#第二种方法（下一次重启才会生效）</span></span><br><span class="line">1 在/etc/fstab中注释或删除swap那一行</span><br><span class="line">2 sed -i <span class="string">&#x27;/swap/s/^/#/&#x27;</span> /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="comment">#常用选项</span></span><br><span class="line">-a|--all      <span class="comment">#禁用 /proc/swaps 中的所有交换区</span></span><br><span class="line">-v|--verbose  <span class="comment">#显示过程</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#spec 参数</span></span><br><span class="line">-L label      <span class="comment">#要使用设备的标签</span></span><br><span class="line">-U uuid       <span class="comment">#要使用设备的 UUID</span></span><br><span class="line">LABEL=label   <span class="comment">#要使用设备的标签</span></span><br><span class="line">UUID=uuid     <span class="comment">#要使用设备的 UUID</span></span><br><span class="line">device        <span class="comment">#要使用设备的名称</span></span><br><span class="line">filename      <span class="comment">#要使用文件的名称</span></span><br></pre></td></tr></table></figure>

<p><strong>查看swap分区</strong></p>
<p>Priority越大，优先级越高，会被优先使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@ubuntu2204 ~]# swapon -s</span><br><span class="line">Filename 	Type 		Size 	  Used 	Priority</span><br><span class="line">/swap.img   file        2097148    0      -2</span><br><span class="line">/dev/sdc3   partition   2097148    0      -3</span><br><span class="line"></span><br><span class="line">[root@ubuntu2204 ~]# <span class="built_in">cat</span> /proc/swaps</span><br></pre></td></tr></table></figure>

<p><strong>SWAP的优先级</strong></p>
<ul>
<li>可以指定swap分区0到32767的优先级，值越大优先级越高</li>
<li>如果用户没有指定，那么核心会自动给swap指定一个优先级，这个优先级从-1开始，每加入一个新的没有用户指定优先级的swap，会给这个优先级减一</li>
<li>先添加的swap的缺省优先级比较高，除非用户自己指定一个优先级，而用户指定的优先级(是正数)永远高于核心缺省指定的优先级(是负数)</li>
</ul>
<p>范例: 以文件实现swap功能</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@centos8 ~]#<span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/swapfile bs=1M count=1024</span><br><span class="line">[root@centos8 ~]#mkswap /swapfile</span><br><span class="line">[root@centos8 ~]#blkid /swapfile &gt;&gt; /etc/fstab</span><br><span class="line">[root@centos8 ~]#vim /etc/fstab</span><br><span class="line">/swapfile swap     swap  defaults     0 0 			<span class="comment">#不要用UUID,使用文件的路径</span></span><br><span class="line"></span><br><span class="line">[root@centos8 ~]#<span class="built_in">chmod</span> 600 /swapfile</span><br><span class="line">[root@centos8 ~]#swapon -a</span><br><span class="line">[root@centos8 ~]#swapon -s</span><br><span class="line">Filename Type Size Used Priority</span><br><span class="line">/dev/sda5               partition 2097148 0 -2</span><br><span class="line">/swapfile               file   1048572 0 -3</span><br></pre></td></tr></table></figure>

<p><strong>永久禁用swap</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除swap行</span></span><br><span class="line">[root@ubuntu2204 ~]#sed -i.bak <span class="string">&#x27;/swap/d&#x27;</span> /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="comment">#或注释swap行</span></span><br><span class="line">[root@ubuntu2204 ~]#sed -i.bak <span class="string">&#x27;/swap/s@^@#@&#x27;</span> /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用swap，由于修改了配置文件，所以重启也不会有SWAP</span></span><br><span class="line">[root@ubuntu2204 ~]#swapoff -a</span><br><span class="line"></span><br><span class="line"><span class="comment">#需要重启生效</span></span><br><span class="line">[root@ubuntu2204 ~]#systemctl mask swap.target</span><br></pre></td></tr></table></figure>

<p>关闭Swap交换分区的优点</p>
<ul>
<li>提高性能：Swap交换分区通常会在物理内存不足时被使用，这会导致额外的I&#x2F;O操作和延迟。当系统使用物理内存满足所有应用程序的需求时，关闭Swap交换分区可以避免这种情况的发生，从而提高服务器的性能。</li>
<li>减少磁盘使用：Swap交换分区通常占用一部分硬盘空间，关闭Swap交换分区可以减少磁盘使用，从而为其他用途释放空间。</li>
<li>减少系统管理复杂性：当系统有Swap交换分区时，需要定期检查Swap交换分区的使用情况，并可能需要调整Swap交换分区的大小。关闭Swap交换分区可以避免这些问题，从而简化系统管理。</li>
</ul>
<p>关闭Swap交换分区也存在一些缺点：</p>
<ul>
<li>内存压力增大：如果系统物理内存不足，关闭Swap交换分区会导致系统无法使用硬盘空间作为额外的内存，这可能导致应用程序崩溃或性能下降。</li>
<li>系统不稳定：在极端情况下，如果系统物理内存不足并且没有Swap交换分区可用，可能会导致系统不稳定或无法正常运行。</li>
</ul>
<h3 id="2-5-3-swap的使用策略"><a href="#2-5-3-swap的使用策略" class="headerlink" title="2.5.3 swap的使用策略"></a>2.5.3 swap的使用策略</h3><p>什么样的数据才能往swap里面放？</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /proc/meminfo | grep -i active</span></span><br><span class="line"> Active:           233836 kB</span><br><span class="line"> Inactive:        1280348 kB</span><br><span class="line"> Active(anon):     138780 kB</span><br><span class="line"> Inactive(anon):    26740 kB</span><br><span class="line"> Active(file):      95056 kB</span><br><span class="line"> Inactive(file):  1253608 kB</span><br></pre></td></tr></table></figure>

<ul>
<li>active活跃数据，inactive非活跃数据，又分为匿名数据和文件数据</li>
<li>匿名数据不能往swap里面放</li>
<li>文件形式的active不能往swap里放，只有文件的inactive才能往swap放</li>
<li>所以并不是有了swap，内存就解决了</li>
</ul>
<p>&#x2F;proc&#x2F;sys&#x2F;vm&#x2F;swappiness 的值（默认30）决定了当内存占用达到一定的百分比时，会启用swap分区的空间</p>
<p>使用规则</p>
<ul>
<li>当内存使用率达到100-swappiness时,会启用交换分区</li>
<li>简单地说这个参数定义了系统对swap的使用倾向，此值越大表示越倾向于使用swap</li>
<li>可以设为0，这样做并不会禁止对swap的使用，只是最大限度地降低了使用swap的可能性，Linux内核3.5-rcl版本，包括RedHat企业版内核2.6.32-303，0意味着“在任何情况下都不要发生交换”。所以现在建议把这个值设置为1</li>
<li>当 <code>/proc/sys/vm/swappiness</code> 的值为 0 时，表示系统完全避免使用交换空间，只使用物理内存。这意味着系统将尽可能多地使用物理内存，即使物理内存不足，也不会使用交换空间。这可能会导致性能下降，因为频繁地访问物理内存比访问交换空间要慢得多。</li>
<li>当 <code>/proc/sys/vm/swappiness</code> 的值为 1 时，表示系统更倾向于使用交换空间而不是物理内存。这意味着系统在物理内存不足时会使用交换空间，但仍然优先考虑使用物理内存。这种设置可能会提高性能，因为交换空间通常比物理内存更快。然而，如果系统经常需要使用交换空间，那么性能可能会受到影响。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt; /proc/sys/vm/swappiness</span><br></pre></td></tr></table></figure>

<p>范例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#说明：CentOS7和8默认值为30，内存在使用到100-30=70%的时候，就开始出现有交换分区的使用</span></span><br><span class="line">[root@centos8 ~]# <span class="built_in">cat</span> /proc/sys/vm/swappiness</span><br><span class="line">30</span><br><span class="line">[root@centos7 ~]# <span class="built_in">cat</span> /proc/sys/vm/swappiness</span><br><span class="line">30</span><br><span class="line">[root@centos6 ~]# <span class="built_in">cat</span> /proc/sys/vm/swappiness</span><br><span class="line">60</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改</span></span><br><span class="line">[root@rocky86 ~]# vim /etc/sysctl.conf</span><br><span class="line">vm.swappiness=0</span><br><span class="line"></span><br><span class="line"><span class="comment">#生效</span></span><br><span class="line">[root@rocky86 ~]# sysctl -p</span><br><span class="line">vm.swappiness = 0</span><br><span class="line"></span><br><span class="line">[root@ubuntu2204 ~]# <span class="built_in">cat</span> /proc/sys/vm/swappiness</span><br><span class="line">0</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://AquaPluto.github.io">Aquarius</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://aquapluto.github.io/Linux/disk-manage/disk-partition/">https://aquapluto.github.io/Linux/disk-manage/disk-partition/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://AquaPluto.github.io" target="_blank">代码推演录</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/">磁盘管理</a></div><div class="post-share"><div class="social-share" data-image="/img/paper5.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://unpkg.com/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/Linux/disk-manage/file-system/" title="文件系统"><img class="cover" src="/img/paper4.png" onerror="onerror=null;src='/img/error-page.png'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">文件系统</div></div><div class="info-2"><div class="info-item-1">1 概念文件系统：操作系统内核中用...</div></div></div></a><a class="pagination-related" href="/Linux/process-manage/job-parallel/" title="作业管理与并行运行"><img class="cover" src="/img/paper3.png" onerror="onerror=null;src='/img/error-page.png'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">作业管理与并行运行</div></div><div class="info-2"><div class="info-item-1">一、作业管理 Linux的作业控制...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/Linux/disk-manage/LVM/" title="逻辑卷管理器LVM"><img class="cover" src="/img/paper2.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-21</div><div class="info-item-2">逻辑卷管理器LVM</div></div><div class="info-2"><div class="info-item-1">1 概念传统磁盘管理的痛点 磁盘空...</div></div></div></a><a class="pagination-related" href="/Linux/disk-manage/disk-command/" title="磁盘管理命令"><img class="cover" src="/img/paper1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-21</div><div class="info-item-2">磁盘管理命令</div></div><div class="info-2"><div class="info-item-1">1 df查看磁盘分区使用情况：当你...</div></div></div></a><a class="pagination-related" href="/Linux/disk-manage/file-system/" title="文件系统"><img class="cover" src="/img/paper4.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-21</div><div class="info-item-2">文件系统</div></div><div class="info-2"><div class="info-item-1">1 概念文件系统：操作系统内核中用...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avator.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Aquarius</div><div class="author-info-description">分享运维开发相关技术</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">78</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/AquaPluto"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/AquaPluto" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://blog.csdn.net/m0_75233142" target="_blank" title="CSDN"><i class="fa-solid fa-code" style="color: #8a2be2;"></i></a><a class="social-icon" href="mailto:wujunlinq@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><p>持续更新文章中，有问题请添加wx</p>
<div>
  <img src="/img/wx.jpg" alt="wx" style="width: 100px">
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-linux%E4%B8%AD%E7%9A%84%E7%A3%81%E7%9B%98"><span class="toc-text">1 linux中的磁盘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E8%AE%BE%E5%A4%87%E6%96%87%E4%BB%B6"><span class="toc-text">1.1 设备文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E7%A3%81%E7%9B%98%E6%93%8D%E4%BD%9C"><span class="toc-text">1.2 磁盘操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="toc-text">2 磁盘分区</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%88%86%E5%8C%BA"><span class="toc-text">2.1 为什么分区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%88%86%E5%8C%BA%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.2 分区类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E5%88%86%E5%8C%BA%E6%A0%BC%E5%BC%8F"><span class="toc-text">2.3 分区格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-MBR%E5%88%86%E5%8C%BA"><span class="toc-text">2.3.1 MBR分区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-GPT%E5%88%86%E5%8C%BA"><span class="toc-text">2.3.2 GPT分区</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E7%AE%A1%E7%90%86%E5%88%86%E5%8C%BA"><span class="toc-text">2.4 管理分区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-parted-%E5%91%BD%E4%BB%A4"><span class="toc-text">2.4.1 parted 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2-%E5%88%86%E5%8C%BA%E5%B7%A5%E5%85%B7fdisk%E5%92%8Cgdisk"><span class="toc-text">2.4.2 分区工具fdisk和gdisk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3-lsblk"><span class="toc-text">2.4.3 lsblk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4-blkid"><span class="toc-text">2.4.4 blkid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-5-findfs"><span class="toc-text">2.4.5 findfs</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-Swap%E5%88%86%E5%8C%BA"><span class="toc-text">2.5 Swap分区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-%E9%85%8D%E7%BD%AEswap%E5%88%86%E5%8C%BA"><span class="toc-text">2.5.1 配置swap分区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E4%BA%A4%E6%8D%A2%E5%88%86%E5%8C%BA%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B"><span class="toc-text">2.5.2 交换分区实现过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-3-swap%E7%9A%84%E4%BD%BF%E7%94%A8%E7%AD%96%E7%95%A5"><span class="toc-text">2.5.3 swap的使用策略</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/role/" title="role"><img src="/img/paper6.png" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="role"/></a><div class="content"><a class="title" href="/CICD/ansible/role/" title="role">role</a><time datetime="2025-08-27T10:49:36.000Z" title="发表于 2025-08-27 18:49">2025-08-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/playbook/" title="playbook"><img src="/img/paper3.png" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="playbook"/></a><div class="content"><a class="title" href="/CICD/ansible/playbook/" title="playbook">playbook</a><time datetime="2025-08-27T10:49:30.000Z" title="发表于 2025-08-27 18:49">2025-08-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/module/" title="module"><img src="/img/paper4.png" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="module"/></a><div class="content"><a class="title" href="/CICD/ansible/module/" title="module">module</a><time datetime="2025-08-27T10:49:25.000Z" title="发表于 2025-08-27 18:49">2025-08-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/command/" title="command"><img src="/img/paper1.jpg" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="command"/></a><div class="content"><a class="title" href="/CICD/ansible/command/" title="command">command</a><time datetime="2025-08-27T10:49:19.000Z" title="发表于 2025-08-27 18:49">2025-08-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/CICD/ansible/deploy/" title="deploy"><img src="/img/paper6.png" onerror="this.onerror=null;this.src='/img/error-page.png'" alt="deploy"/></a><div class="content"><a class="title" href="/CICD/ansible/deploy/" title="deploy">deploy</a><time datetime="2025-08-27T10:49:09.000Z" title="发表于 2025-08-27 18:49">2025-08-27</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Aquarius</span></div><div class="footer_custom_text"><style>
div#runtime {
  font-size: 13px;
  font-weight: bold;
}

div#ghbdages_list {
  height: 1.5rem;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 10px
}

.github-badge {
  display: flex;
  align-items: center;
  margin-inline: 6px;
}
</style>
<div id="runtime"></div>
<div id="ghbdages"></div>
<script>
  function createtime() {
    const now = new Date();
    const grt = new Date("08/01/2025 00:00:00"); // 网站诞生时间

    // 计算天、小时、分钟和秒
    const days = Math.floor((now - grt) / (1000 * 60 * 60 * 24));
    const hours = Math.floor(((now - grt) / (1000 * 60 * 60)) % 24)
      .toString()
      .padStart(2, "0");
    const minutes = Math.floor(((now - grt) / (1000 * 60)) % 60)
      .toString()
      .padStart(2, "0");
    const seconds = Math.floor(((now - grt) / 1000) % 60)
      .toString()
      .padStart(2, "0");

    // HTML 输出
    const currentTimeHtml = `
          <div>
              本站已运行 ${days} 天 ${hours} 小时 ${minutes} 分 ${seconds} 秒 
          </div>`;

    const runtime = document.getElementById("runtime");
    if (runtime) runtime.innerHTML = currentTimeHtml;
  }

  // 设置每秒调用函数
  setInterval(createtime, 1000);

  function renderBadge() {
    const currentTimeHtml = `
      <div id="ghbdages_list">
          <a class="github-badge" target="_blank" href="https://hexo.io/" title="hexo:7.3.0">
              <img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=hexo" alt="Static Badge">
          </a>
          <a class="github-badge" target="_blank" href="https://github.com/" title="github">
              <img src="https://img.shields.io/badge/Code-GitHub-181717?logo=GitHub&color=%23FF7102" alt="Static Badge">
          </a>
          <a class="github-badge" target="_blank" href="https://vercel.com/" title="vercel">
              <img src="https://img.shields.io/badge/Host-Vercel-%23F0D722?logo=Vercel" alt="Static Badge">
          </a>
          <a class="github-badge" target="_blank" href="https://analytics.sysio.ai/" title="umami">
              <img src="https://img.shields.io/badge/Analytics-Umami-%237FB100?logo=umami&logoColor=%237FB100" alt="Static Badge">
          </a>
      </div>`;

    const ghbdages = document.getElementById("ghbdages");
    if (ghbdages) {
      ghbdages.innerHTML = currentTimeHtml;
    }
  }

  window.onload = renderBadge;
</script>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://unpkg.com/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="https://unpkg.com/instant.page/instantpage.js" type="module"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://unpkg.com/mathjax/es5/tex-mml-chtml.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script></div><script src="https://cdn.jsdelivr.net/gh/xiabo2/CDN@latest/fishes.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://unpkg.com/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章..." type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>